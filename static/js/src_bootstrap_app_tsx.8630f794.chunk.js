(globalThis.webpackChunkle_flash=globalThis.webpackChunkle_flash||[]).push([["src_bootstrap_app_tsx"],{45597:(e,t,A)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return s.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var r=n(A(70854)),s=n(A(69363)),i=n(A(83272));function n(e){return e&&e.__esModule?e:{default:e}}const a=[r.default];t.h0=a},34031:(e,t,A)=>{"use strict";A.r(t),A.d(t,{Background:()=>xt,Layout:()=>yt,Page:()=>ft,__esModule:()=>mt.X$,logo:()=>mt.jY,panels:()=>mt.h0,readme:()=>mt.ng});var r=A(92950),s=A(55754),i=A(49471),n=A(45055),a=A(32671),o=A(69716);const d={appId:"le_flash",url:"https://descartesnetwork.github.io/senhub/index.js"},l={devnet:{node:"https://api.devnet.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"},testnet:{node:"https://api.testnet.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"},mainnet:{node:"https://api.mainnet-beta.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"}},c={development:{senApiUpload:"https://api.sentre.io/storage/upload",aws:"https://sen-storage.s3.us-west-2.amazonaws.com/"},production:{senApiUpload:"https://api.sentre.io/storage/upload",aws:"https://sen-storage.s3.us-west-2.amazonaws.com/"}},u={manifest:{development:{...d},production:{...d}}[i.env],sol:l[i.net],api:c[i.env]},{manifest:{appId:p}}=u;var g=A(69363),m=A(45263);const h=[{label:"Dashboard",key:"dashboard",icon:(0,m.jsx)(o.Z,{name:"images-outline"})},{label:"Airdrop",key:"airdrop",icon:(0,m.jsx)(o.Z,{name:"airplane-outline"})}],y=()=>{const[e,t]=(0,r.useState)("dashboard"),{pathname:A}=(0,n.useLocation)(),{appRoute:s,pushHistory:i}=(()=>{const e=(0,n.useLocation)(),t=(0,n.useHistory)(),A=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),s=(0,r.useCallback)((e=>A.get(e)),[A]),i=(0,r.useCallback)((e=>{const t=new URLSearchParams;for(const A in e)t.set(A,e[A]);return t.toString()}),[]),a=(0,r.useMemo)((()=>`/app/${p}`),[]);return{getQuery:s,generateQuery:i,pushHistory:(0,r.useCallback)((e=>t.push(`${a}${e}`)),[a,t]),appRoute:a}})(),o=(0,r.useCallback)((()=>{const e=A.replace(`${s}/`,""),r=e.indexOf("/");return t(-1===r?e:e.slice(0,r))}),[s,A]);return(0,r.useEffect)((()=>{o()}),[o]),(0,m.jsxs)(a.Row,{className:"header",align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Menu,{selectedKeys:[e],items:h,mode:"horizontal",onSelect:async e=>i("/"+e.key)})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(a.Avatar,{shape:"square",src:g,size:32})})]})};var x=A(50794),f=A(67096);const w=()=>(0,r.useMemo)((()=>new f.I(i.connection)),[]),C=()=>{const[e,t]=(0,r.useState)([]),A=w(),s=(0,i.useWalletAddress)(),n=(0,r.useCallback)((async()=>{const e=await A.nfts().findAllByOwner({owner:new x.rV.PublicKey(s)});return t(e)}),[s,A]);return(0,r.useEffect)((()=>{n()}),[n]),e},I=e=>{const t=C(),A=(0,r.useMemo)((()=>{const A=[];for(const r of t)r.collection&&r.collection.address.toBase58()===e&&A.push(r);return A}),[e,t]);return A},E=e=>{const[t,A]=(0,r.useState)(!1),[s,i]=(0,r.useState)(),n=w(),a=(0,r.useCallback)((async()=>{if(e)try{A(!0);const t=await n.nfts().findByMint({mintAddress:new x.rV.PublicKey(e)});return i(t)}catch(t){console.log(t)}finally{A(!1)}}),[n,e]);return(0,r.useEffect)((()=>{a()}),[a]),{nftData:s,loading:t}},B=e=>{let{label:t,value:A,icon:r}=e;return(0,m.jsx)(a.Card,{style:{borderRadius:16},bodyStyle:{padding:"20px 24px"},children:(0,m.jsxs)(a.Space,{style:{width:"100%"},direction:"vertical",children:[(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Text,{type:"success",children:t})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(o.Z,{name:r,style:{fontSize:18}})})]}),(0,m.jsx)(a.Typography.Title,{level:4,children:A})]})})},j=()=>{const e=C();return(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{xs:24,sm:12,md:8,children:(0,m.jsx)(B,{label:"Total balance NFT",value:e.length,icon:"cash-outline"})}),(0,m.jsx)(a.Col,{xs:24,sm:12,md:8,children:(0,m.jsx)(B,{label:"Total NFT received",value:3,icon:"image-outline"})}),(0,m.jsx)(a.Col,{xs:24,sm:12,md:8,children:(0,m.jsx)(B,{label:"Total wallet airdrops",value:1,icon:"wallet-outline"})})]})};var b=A(4550),v=A.n(b);const Q=e=>{var t,A;let{chequeAddress:i}=e;const n=(0,s.useSelector)((e=>{let{cheques:t}=e;return t})),o=(0,r.useMemo)((()=>{const e=Object.keys(n).find((e=>e===i));if(!e)return"";return n[e].mint.toBase58()}),[i,n]),{nftData:d}=E(o);return(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Avatar,{size:24,src:null===d||void 0===d||null===(t=d.json)||void 0===t?void 0:t.image}),(0,m.jsx)(a.Typography.Text,{children:(null===d||void 0===d?void 0:d.name)||(null===d||void 0===d||null===(A=d.json)||void 0===A?void 0:A.name)})]})},S=()=>(0,m.jsx)(a.Tag,{children:"Ready"}),M=()=>(0,m.jsx)(a.Button,{type:"text",style:{color:"#ED8000"},children:"CLAIM"}),P="MMM DD, YYYY HH:mm",T=[{title:"UNLOCK DATE",dataIndex:"unlockDate",render:e=>(0,m.jsx)(a.Typography.Text,{children:e?v()(e).format(P):"Immediately"})},{title:"EXPIRATION DATE",dataIndex:"expirationDate",render:e=>(0,m.jsx)(a.Typography.Text,{children:e?v()(e).format(P):"Unlimited"})},{title:"SENDER",dataIndex:"sender",render:e=>(0,m.jsx)(a.Typography.Text,{type:"success",underline:!0,onClick:()=>window.open(i.util.explorer(e),"_blank"),style:{cursor:"pointer"},children:i.util.shortenAddress(e)})},{title:"NFT",dataIndex:"chequeAddress",render:e=>(0,m.jsx)(Q,{chequeAddress:e})},{title:"STATUS",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(S,{})},{title:"ACTION",dataIndex:"chequeAddress",render:e=>(0,m.jsx)(M,{})}];var k=A(7867),D=A(21995),R=A.n(D),K=A(97429).Buffer;const N=K.from("00","hex"),G=e=>{const t=(e=>{const t=k.bs58.decode(e);let A=K.from(t.subarray(28,32)).toString("utf8");for(;A[0]===N.toString("utf8");)A=A.substring(1);return A})(e),A=K.from(k.bs58.decode(e).subarray(0,28));return`${k.bs58.encode(A)}.${t}`};var q=A(97429).Buffer;const Y=()=>{const e=(0,s.useSelector)((e=>{let{distributors:t}=e;return t}));return(0,r.useCallback)((async t=>{const A=e[t],{metadata:r}=A,s=k.bs58.encode(q.from(r)),i=G(s),n=u.api.aws+i,{data:a}=await R().get(n);return a.data}),[e])},V=(k.bs58.encode(x.Wr.accountDiscriminator("distributor")),k.bs58.encode(x.Wr.accountDiscriminator("receipt")),{version:"0.1.0",name:"le_flash",instructions:[{name:"initializePool",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!0},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"mint",type:"publicKey"},{name:"treasury",type:"publicKey"}]},{name:"deposit",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"srcAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"recipient",type:"publicKey"}]},{name:"withdraw",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"dstAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amountOut",type:"u64"}]},{name:"withdrawNft",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"dstAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"closeCheque",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"cheque",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeDistributor",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!0},{name:"src",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"feeCollector",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"merkleRoot",type:{array:["u8",32]}},{name:"total",type:"u64"},{name:"endedAt",type:"i64"},{name:"startedAt",type:"i64"},{name:"metadata",type:{array:["u8",32]}},{name:"fee",type:"u64"}]},{name:"claim",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"receipt",isMut:!0,isSigner:!1},{name:"dst",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"feeCollector",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"proof",type:{vec:{array:["u8",32]}}},{name:"amount",type:"u64"},{name:"startedAt",type:"i64"},{name:"salt",type:{array:["u8",32]}},{name:"fee",type:"u64"},{name:"recipient",type:"publicKey"}]}],accounts:[{name:"cheque",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"amount",type:"u64"}]}},{name:"distributor",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"merkleRoot",type:{array:["u8",32]}},{name:"total",type:"u64"},{name:"claimed",type:"u64"},{name:"endedAt",type:"i64"},{name:"startedAt",type:"i64"},{name:"metadata",type:{array:["u8",32]}}]}},{name:"pool",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"treasury",type:"publicKey"},{name:"mintLpt",type:"publicKey"}]}},{name:"receipt",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"distributor",type:"publicKey"},{name:"recipient",type:"publicKey"},{name:"startedAt",type:"i64"},{name:"claimedAt",type:"i64"},{name:"salt",type:{array:["u8",32]}}]}}],events:[{name:"CloseChequeEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1}]},{name:"DepositEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1},{name:"amountIn",type:"u64",index:!1},{name:"lptPrintAmount",type:"u64",index:!1}]},{name:"InitializePoolEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"treasury",type:"publicKey",index:!1}]},{name:"ClaimEvent",fields:[{name:"destination",type:"publicKey",index:!1},{name:"recipient",type:"publicKey",index:!1},{name:"startedAt",type:"i64",index:!1},{name:"claimedAt",type:"i64",index:!1},{name:"claimed",type:"u64",index:!1}]},{name:"InitializeDistributorEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"distributor",type:"publicKey",index:!1},{name:"merkleRoot",type:{array:["u8",32]},index:!1},{name:"total",type:"u64",index:!1},{name:"endedAt",type:"i64",index:!1},{name:"metadata",type:{array:["u8",32]},index:!1}]},{name:"RevokeEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"distributor",type:"publicKey",index:!1},{name:"remaining",type:"u64",index:!1}]},{name:"WithdrawNFTEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1}]},{name:"WithdrawEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"amountOut",type:"u64",index:!1},{name:"amountLpt",type:"u64",index:!1}]}],errors:[{code:6e3,name:"InvalidNftCollection",msg:"Invalid NFT collection"},{code:6001,name:"NotWithDraw",msg:"NFT has not been retrieved"},{code:6002,name:"Overflow",msg:"Operation overflowed"},{code:6003,name:"InvalidMerkleProof",msg:"Invalid merkle proof"},{code:6004,name:"InvalidCurrentDate",msg:"Cannot get current date"},{code:6005,name:"EndedCampaign",msg:"The campaign has been ended"},{code:6006,name:"NotStartedCampaign",msg:"The campaign is not started yet"},{code:6007,name:"NotEndedCampaign",msg:"The campaign is not ended yet"},{code:6008,name:"NoBump",msg:"Cannot derive the program address"}]}),O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new x.rV.Keypair).publicKey.toBase58();return{fee:new x.BN(0),feeCollectorAddress:e}};A(71256);var z=A(38073),L=A(97429).Buffer;const H=e=>{if(!e)return!1;try{if(!new x.rV.PublicKey(e))throw new Error("Invalid public key");return!0}catch(t){return!1}},U=async e=>await z.O2.metadata.Metadata.getPDA(new x.rV.PublicKey(e)),F=async(e,t,A,r)=>{const[s]=await x.rV.PublicKey.findProgramAddress([L.from("receipt"),e,t.toBuffer(),A.toBuffer()],r);return s};var W=A(59186),X=A(97429).Buffer;const Z={rent:x.rV.SYSVAR_RENT_PUBKEY,systemProgram:x.rV.SystemProgram.programId,associatedTokenProgram:x.P6.token.ASSOCIATED_PROGRAM_ID,tokenProgram:W.H_};const _=class{constructor(e,t){var A=this;if(this._provider=void 0,this.program=void 0,this.deriveTreasurerAddress=async e=>{if("string"!==typeof e&&(e=e.toBase58()),!H(e))throw new Error("Invalid pool address");const t=new x.rV.PublicKey(e),[A]=await x.rV.PublicKey.findProgramAddress([X.from("treasurer"),t.toBuffer()],this.program.programId);return A.toBase58()},this.deriveChequeAddress=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!H(e))throw new Error("Invalid proposal address");const r=new x.rV.PublicKey(e),s=A._provider.wallet.publicKey,[i]=await await x.rV.PublicKey.findProgramAddress([X.from("cheque"),r.toBuffer(),s.toBuffer()],A.program.programId),n=i.toBase58();if(t){let t,r;try{const{authority:e,pool:s}=await A.getChequeData(n);t=e.toBase58(),r=s.toBase58()}catch(a){throw new Error(`This cheque ${n} is not initialized yet`)}if(A._provider.wallet.publicKey.toBase58()!==t)throw new Error("Violated authority address");if(e!==r)throw new Error("Violated proposal address")}return n},this.getPoolData=async e=>this.program.account.pool.fetch(e),this.getChequeData=async e=>this.program.account.cheque.fetch(e),this.fetchCheques=async()=>this.program.account.cheque.all(),this.initializePool=async e=>{let{pool:t=x.rV.Keypair.generate(),mintLpt:A=x.rV.Keypair.generate(),sendAndConfirm:r=!0,mint:s}=e;const i=t,n=i.publicKey.toBase58(),a=await this.deriveTreasurerAddress(n),o=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(A.publicKey),owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),d=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(a)}),l=await this.program.methods.initializePool(s,d).accounts({associatedTokenAccountLpt:o,authority:this._provider.wallet.publicKey,mintLpt:A.publicKey,pool:n,treasurer:a,...Z}).transaction();let c="";return r&&(this._provider.opts.skipPreflight=!0,c=await this._provider.sendAndConfirm(l,[i,A])),{txId:c,poolAddress:i.publicKey.toBase58(),tx:l}},this.deposit=async e=>{let{recipient:t=this._provider.wallet.publicKey.toBase58(),poolAddress:A,sendAndConfirm:r=!0,mintNFTAddress:s,chequeKeypair:i=x.rV.Keypair.generate()}=e;const n=new x.rV.PublicKey(t),{mintLpt:a}=await this.getPoolData(A),o=await this.deriveTreasurerAddress(A),d=(await U(new x.rV.PublicKey(s))).toBase58(),l=await x.P6.token.associatedAddress({mint:a,owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),c=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),u=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(o)}),p=i.publicKey.toBase58();let g=await this.program.methods.deposit(n).accounts({authority:this._provider.wallet.publicKey,pool:A,associatedTokenAccountLpt:l,mint:s,mintLpt:a,srcAssociatedTokenAccount:c,treasurer:o,treasury:u,cheque:p,metadata:d,...Z}).transaction(),m="";return r&&(this._provider.opts.skipPreflight=!0,m=await this._provider.sendAndConfirm(g,[i])),{txId:m,tx:g,chequeAddress:i.publicKey.toBase58()}},this.withdrawNFT=async e=>{let{chequeAddress:t,sendAndConfirm:A=!0}=e;const{pool:r,mint:s}=await this.getChequeData(t),{mintLpt:i}=await this.getPoolData(r),n=await this.deriveTreasurerAddress(r),a=(await U(new x.rV.PublicKey(s))).toBase58(),o=await x.P6.token.associatedAddress({mint:i,owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),d=await x.P6.token.associatedAddress({mint:s,owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),l=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(n)});let c=await this.program.methods.withdrawNft().accounts({authority:this._provider.wallet.publicKey,pool:r,associatedTokenAccountLpt:o,mint:s,mintLpt:i,dstAssociatedTokenAccount:d,treasurer:n,treasury:l,metadata:a,cheque:t,...Z}).transaction(),u="";return A&&(u=await this._provider.sendAndConfirm(c,[])),{txId:u,tx:c}},this.closeCheque=async e=>{let{chequeAddress:t,sendAndConfirm:A=!0}=e;const r=new x.rV.PublicKey(t),s=await this.program.methods.closeCheque().accounts({authority:this._provider.wallet.publicKey,cheque:r,...Z}).transaction();let i="";return console.log(s,"tx"),A&&(i=await this._provider.sendAndConfirm(s,[])),{txId:i,tx:s}},this.parseDistributorData=e=>this.program.coder.accounts.decode("distributor",e),this.getDistributorData=async e=>this.program.account.distributor.fetch(e),this.parseReceiptData=e=>this.program.coder.accounts.decode("receipt",e),this.getReceiptData=async e=>this.program.account.receipt.fetch(e),this.deriveReceiptAddress=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(32!==e.length)throw new Error("The salt must has length 32");if(!H(t))throw new Error("Invalid distributor address");const s=await F(e,new x.rV.PublicKey(t),A._provider.wallet.publicKey,A.program.programId),i=s.toBase58();if(r){let r,s,a;try{const{authority:e,distributor:t,salt:n}=await A.getReceiptData(i);r=e.toBase58(),s=t.toBase58(),a=X.from(n)}catch(n){throw new Error(`This receipt ${i} is not initialized yet`)}if(A._provider.wallet.publicKey.toBase58()!==r)throw new Error("Violated authority address");if(t!==s)throw new Error("Violated proposal address");if(0!==e.compare(a))throw new Error("Violated salt")}return i},this.deriveDistributorTreasurerAddress=async e=>{if(!H(e))throw new Error("Invalid distributor address");const t=new x.rV.PublicKey(e),[A]=await x.rV.PublicKey.findProgramAddress([X.from("treasurer"),t.toBuffer()],this.program.programId);return A.toBase58()},this.initializeDistributor=async e=>{let{tokenAddress:t,total:A,merkleRoot:r,metadata:s,startedAt:i=0,endedAt:n=0,distributor:a=x.rV.Keypair.generate(),feeOptions:o=O(this._provider.wallet.publicKey.toBase58()),sendAndConfirm:d=!0}=e;const{fee:l,feeCollectorAddress:c}=o;if(!H(c))throw new Error("Invalid fee collector address");if(!H(t))throw new Error("Invalid token address");if(!(u=r)||32!==u.length)throw new Error("Invalid merkle root");var u;if(A.isNeg())throw new Error("The total must not be negative");if(32!==s.length)throw new Error("Invalid metadata path");const p=a.publicKey.toBase58(),g=new x.rV.PublicKey(t),m=await x.P6.token.associatedAddress({mint:g,owner:this._provider.wallet.publicKey}),h=await this.deriveDistributorTreasurerAddress(p),y=new x.rV.PublicKey(h),f=await x.P6.token.associatedAddress({mint:g,owner:y}),w=await this.program.methods.initializeDistributor([...r],A,new x.BN(n),new x.BN(i),[...s],l).accounts({authority:this._provider.wallet.publicKey,distributor:a.publicKey,src:m,treasurer:y,treasury:f,feeCollector:new x.rV.PublicKey(c),mint:g,tokenProgram:x.P6.token.TOKEN_PROGRAM_ID,associatedTokenProgram:x.P6.token.ASSOCIATED_PROGRAM_ID,systemProgram:x.rV.SystemProgram.programId,rent:x.rV.SYSVAR_RENT_PUBKEY}).signers([a]);return{tx:await w.transaction(),txId:d?await w.rpc({commitment:"confirmed"}):"",distributorAddress:p}},this.claim=async e=>{let{distributorAddress:t,proof:A,data:r,feeOptions:s=O(this._provider.wallet.publicKey.toBase58()),sendAndConfirm:i=!0}=e;const{fee:n,feeCollectorAddress:a}=s;if(!H(a))throw new Error("Invalid fee collector address");if(!H(t))throw new Error("Invalid distributor address");if(!this._provider.wallet.publicKey.equals(r.authority))throw new Error("Invalid athority address");const{mint:o}=await this.getDistributorData(t),d=await this.deriveReceiptAddress(r.salt,t),l=await x.P6.token.associatedAddress({mint:o,owner:this._provider.wallet.publicKey}),c=await this.deriveDistributorTreasurerAddress(t),u=new x.rV.PublicKey(c),p=await x.P6.token.associatedAddress({mint:o,owner:u}),g=await this.program.methods.claim(A.map((e=>e.toJSON().data)),new x.BN(1),r.startedAt,r.salt.toJSON().data,n,r.chequeAddress).accounts({authority:this._provider.wallet.publicKey,distributor:new x.rV.PublicKey(t),receipt:new x.rV.PublicKey(d),dst:l,treasurer:u,treasury:p,feeCollector:new x.rV.PublicKey(a),mint:o,tokenProgram:x.P6.token.TOKEN_PROGRAM_ID,associatedTokenProgram:x.P6.token.ASSOCIATED_PROGRAM_ID,systemProgram:x.rV.SystemProgram.programId,rent:x.rV.SYSVAR_RENT_PUBKEY});return{tx:await g.transaction(),txId:i?await g.rpc({commitment:"confirmed"}):"",dstAddress:l.toBase58()}},!H(t))throw new Error("Invalid program id");this._provider=e,this.program=new x.$r(V,t,this._provider)}};var J=A(16348),$=A(97429).Buffer;const ee=104;class te{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.receipients=void 0,this.leafs=void 0,this.getTotal=()=>new x.BN(this.receipients.length),this.toBuffer=()=>$.concat(this.receipients.map(te.serialize)),this.getLeaf=e=>{const t=te.serialize(e);return $.from(J.keccak_256.digest(t))},this.getParent=(e,t)=>{if(!e||!t)throw new Error("Invalid child");const A=$.concat(te.sort(e,t));return $.from(J.keccak_256.digest(A))},this.getSibling=(e,t)=>{const A=t.findIndex((t=>0===t.compare(e)));if(-1===A)throw new Error("Invalid child");return A%2===1?t[A-1]:t[A+1]},this.nextLayer=e=>{const t=[...e];if(0===t.length)throw new Error("Invalid tree");if(1===t.length)return t;const A=t.length%2===1?t.pop():void 0,r=[];for(let s=0;s<t.length;s+=2)r.push(this.getParent(t[s],t[s+1]));return A?[...r,A]:r},this.deriveMerkleRoot=()=>{let e=this.leafs;for(;e.length>1;)e=this.nextLayer(e);return e[0]},this.deriveProof=e=>{let t=this.getLeaf(e);const A=[];let r=this.leafs;for(;r.length>1;){const e=this.getSibling(t,r);e&&(t=this.getParent(t,e),A.push(e)),r=this.nextLayer(r)}return A},this.verifyProof=(e,t)=>{let A=this.getLeaf(t);for(const r of e)A=this.getParent(A,r);return 0===this.deriveMerkleRoot().compare(A)},this.receipients=e,this.leafs=te.sort(...this.receipients.map((e=>this.getLeaf(e))))}}te.sort=function(){for(var e=arguments.length,t=new Array(e),A=0;A<e;A++)t[A]=arguments[A];return[...t].sort(((e,t)=>{const A=$.compare(e,t);if(0===A)throw new Error("The receipients has a duplication");return A}))},te.serialize=e=>{let{authority:t,chequeAddress:A,startedAt:r,salt:s}=e;return $.concat([t.toBuffer(),A.toBuffer(),r.toArrayLike($,"le",8),s])},te.deserialize=e=>{if(e.length!==ee)throw new Error("Invalid buffer");return{authority:new x.rV.PublicKey(e.subarray(0,32)),chequeAddress:new x.rV.PublicKey(e.subarray(32,64)),startedAt:new x.BN(e.subarray(64,72),"le"),salt:$.from(e.subarray(72,104))}},te.salt=e=>{let t="";for(;t.length<128;)t+=Math.round(10*Math.random()).toString();const A=e||t;return $.from(J.keccak_256.digest(A))},te.fromBuffer=e=>{if(e.length%ee!==0)throw new Error("Invalid buffer");let t=[];for(let A=0;A<e.length;A+=ee)t.push(te.deserialize(e.subarray(A,A+ee)));return new te(t)};var Ae=A(97429).Buffer;const re=()=>{const[e,t]=(0,r.useState)([]),A=(0,s.useSelector)((e=>{let{distributors:t}=e;return t})),n=(0,i.useWalletAddress)(),o=Y(),d=(0,r.useCallback)((async()=>{const e=[];for(const t in A){const{endedAt:r,authority:s}=A[t],{data:i}=await o(t),a=te.fromBuffer(Ae.from(i)).receipients;for(const A of a)if(n===A.authority.toBase58()){e.push({distributorAddress:t,chequeAddress:A.chequeAddress.toBase58(),expirationDate:1e3*r.toNumber(),sender:s.toBase58(),unlockDate:1e3*A.startedAt.toNumber()});break}}return t(e)}),[A,o,n]);return(0,r.useEffect)((()=>{d()}),[d]),(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Airdrop Receive"})}),(0,m.jsx)(a.Col,{children:"Filter"}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Table,{columns:T,dataSource:e,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})})]})})},se=()=>(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:3,children:"Dashboard"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(j,{})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(re,{})}),(0,m.jsx)(a.Col,{span:24})]});var ie=A(17604);var ne=A(4065);const ae=()=>{const e=(0,i.useWalletAddress)();return(0,r.useMemo)((()=>{const t=(0,ne.getAnchorProvider)(i.rpc,e,window.sentre.solana);return new _(t,u.sol.leFlashId)}),[e])},oe=()=>{const[e,t]=(0,r.useState)(!1),A=(0,r.useCallback)((async e=>{const t=new FormData;t.append("file",e);const{data:A}=await R().post(u.api.senApiUpload,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});return A.cid}),[]),s=ae(),i=(0,r.useCallback)((async(e,r)=>{try{t(!0);let i=[];const{poolAddress:n}=await s.initializePool({mint:new x.rV.PublicKey(r)}),a=[];for(const{walletAddress:t,mintAddress:A}of e){const e=x.rV.Keypair.generate(),{tx:r,chequeAddress:o}=await s.deposit({recipient:t,mintNFTAddress:A,sendAndConfirm:!1,poolAddress:n,chequeKeypair:e});i.push({tx:r,signers:[e]}),a.push({walletAddress:t,chequeAddress:o,mintAddress:A})}const o=a.map(((e,t)=>{let{chequeAddress:A,walletAddress:r}=e;return{authority:new x.rV.PublicKey(r),chequeAddress:new x.rV.PublicKey(A||""),startedAt:new x.BN(Date.now()/1e3),salt:te.salt(`le-flash/${t.toString()}`)}})),d=new te(o),l=d.toBuffer(),c={checked:!1,createAt:Math.floor(Date.now()/1e3),data:l},u=[new Blob([JSON.stringify({data:c},null,2)],{type:"application/json"})],p=new File(u,"metadata.txt"),g=await A(p),m=k.bs58.decode(g),{mintLpt:h}=await s.getPoolData(n),y=x.rV.Keypair.generate(),{txId:f,tx:w}=await s.initializeDistributor({tokenAddress:h.toBase58(),total:d.getTotal(),merkleRoot:d.deriveMerkleRoot(),metadata:m,endedAt:0,distributor:y,sendAndConfirm:!1});return i.push({tx:w,signers:[y]}),await s._provider.sendAll(i.map((e=>{let{tx:t,signers:A}=e;return{tx:t,signers:A}}))),(0,ie.t5)("Initialize new airdrop successfully!",f)}catch(i){(0,ie.cB)(i)}finally{t(!1)}}),[s,A]);return{onAirdrop:i,loading:e}};var de=A(19289);const le="recipients",ce=(0,de.createAsyncThunk)(`${le}/addRecipient`,(async(e,t)=>{let{newRecipients:A}=e,{getState:r}=t;const{recipients:s}=r();return[...[...s],...A]})),ue=(0,de.createAsyncThunk)(`${le}/removeRecipient`,(async(e,t)=>{let{index:A}=e,{getState:r}=t;const{recipients:s}=r(),i=[...s];return i.splice(A,1),[...i]})),pe=(0,de.createAsyncThunk)(`${le}/setRecipient`,(async e=>e)),ge=(0,de.createSlice)({name:le,initialState:[],reducers:{},extraReducers:e=>{e.addCase(ce.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)})).addCase(ue.fulfilled,((e,t)=>{let{payload:A}=t;return A})).addCase(pe.fulfilled,((e,t)=>{let{payload:A}=t;return A}))}}).reducer;var me=A(51518),he=A.n(me);const ye=e=>{let{address:t}=e;const[A,s]=(0,r.useState)(!1);return(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Typography.Text,{type:"secondary",className:"t-16",children:i.util.shortenAddress(t,3)}),(0,m.jsx)(a.Tooltip,{title:"Copied",open:A,children:(0,m.jsx)(he(),{text:t,onCopy:async()=>{s(!0),await i.util.asyncWait(1500),s(!1)},children:(0,m.jsx)(a.Typography.Text,{style:{cursor:"pointer"},className:"t-16",children:(0,m.jsx)(o.Z,{name:"copy-outline"})})})})]})},xe=e=>{var t,A;let{mintAddress:r,onSelect:s,showName:i=!1,size:n}=e;const{nftData:o,loading:d}=E(r);return(0,m.jsx)(a.Spin,{spinning:d,children:(0,m.jsxs)(a.Row,{gutter:[12,12],style:{cursor:"pointer"},children:[(0,m.jsx)(a.Col,{span:24,style:{textAlign:"center",width:n},onClick:()=>s?s(r):null,children:(0,m.jsx)(a.Image,{src:(null===o||void 0===o||null===(t=o.json)||void 0===t?void 0:t.image)||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAYAAACadoJwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABbySURBVHgB7d2NTht3vsfh2S5NgPDahHIQ6v1fUKW9gQhFUUoxL00INMnJzxzv5nQbz9ie+WKb55GsdovBiFnBfPx/+8evv/7rSwMAADC8Lz80AAAAIQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAA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o6OXpmM9EXW9a/Srrj0A8/EXE2AB9S64dQBPQy24r2stPgAWYwQEYEEVH69fn413vdrdfbFWp6Hzn+2Xawc0ABbnryRAT+oGtd4d39zcHJ8jIURW2/39n+PT77scQAlAd/46AvSoRkMqQupR52pUjGxtPW/++c+N5scfN6wVWVIVGJ8+ff4aHXfNhw8fx9OtnG4OMAwBAjCQuomtx9c30AGA/+OtOAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAICYjQYAAGA2X5r5fPlf5FkMkmAd32wAAAAASUVORK5CYII=",preview:!1,style:{borderRadius:4,aspectRatio:"1",objectFit:"cover"}})}),i&&(0,m.jsx)(a.Col,{span:24,style:{textAlign:"left"},children:(0,m.jsxs)(a.Row,{children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{ellipsis:{tooltip:!0},level:5,children:(null===o||void 0===o?void 0:o.name)||(null===o||void 0===o||null===(A=o.json)||void 0===A?void 0:A.name)})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ye,{address:r})})]})})]})})},fe=e=>{let{mintAddresses:t,onSelect:A=(()=>{})}=e;return(0,m.jsx)(a.Row,{gutter:[8,8],className:"scrollbar",style:{maxHeight:400,overflowY:"hidden"},children:t.map((e=>(0,m.jsx)(a.Col,{onClick:()=>A(e),span:8,children:(0,m.jsx)(xe,{mintAddress:e,showName:!0})},e)))})},we=e=>{var t,A;let{onMintSelect:i=(()=>{}),mintAddress:n="",disabled:d=!1}=e;const[l,c]=(0,r.useState)(!1),[u,p]=(0,r.useState)(n),g=(0,s.useSelector)((e=>{let{main:t}=e;return t.collection})),h=(0,s.useSelector)((e=>{let{recipients:t}=e;return t})),y=I(g),x=h.map((e=>{let{mintAddress:t}=e;return t})),f=y.map((e=>e.mintAddress.toBase58())).filter((e=>![u,...x].includes(e))),{nftData:w}=E(u);return(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(a.Button,{type:"ghost",style:{textAlign:n?"left":"center"},ghost:!0,block:!0,onClick:()=>c(!0),disabled:!g||d,children:n?(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Avatar,{size:24,src:null===w||void 0===w||null===(t=w.json)||void 0===t?void 0:t.image}),(0,m.jsx)(a.Typography.Text,{className:"caption",children:(null===w||void 0===w?void 0:w.name)||(null===w||void 0===w||null===(A=w.json)||void 0===A?void 0:A.name)})]}):(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(o.Z,{name:"chevron-down-outline"}),"Select NFT"]})}),(0,m.jsx)(a.Modal,{open:l,closeIcon:(0,m.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>c(!1),footer:null,style:{paddingBottom:0},children:(0,m.jsxs)(a.Row,{gutter:[0,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Select a NFT"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(fe,{onSelect:e=>{p(e),i(e),c(!1)},mintAddresses:f})})]})})]})},Ce=e=>{let{mintAddress:t,walletAddress:A,index:i=0}=e;const[n,d]=(0,r.useState)({mintAddress:t,walletAddress:A}),l=(0,s.useDispatch)(),c=(e,t)=>d({...n,[e]:t});return(0,m.jsxs)(a.Row,{gutter:16,children:[(0,m.jsx)(a.Col,{span:14,children:(0,m.jsx)(a.Input,{value:n.walletAddress,placeholder:"Input recipient's address",onChange:e=>c("walletAddress",e.target.value),disabled:!!t})}),(0,m.jsx)(a.Col,{span:8,children:(0,m.jsx)(we,{onMintSelect:e=>c("mintAddress",e),mintAddress:n.mintAddress,disabled:!!t})}),(0,m.jsx)(a.Col,{span:2,children:A?(0,m.jsx)(a.Button,{type:"ghost",ghost:!0,icon:(0,m.jsx)(a.Typography.Text,{type:"danger",children:(0,m.jsx)(o.Z,{name:"remove-circle-outline"})}),block:!0,onClick:()=>l(ue({index:i}))}):(0,m.jsx)(a.Button,{type:"ghost",ghost:!0,icon:(0,m.jsx)(o.Z,{name:"add-circle-outline"}),block:!0,onClick:()=>{if(!n.mintAddress||!n.walletAddress||!n)return;const e={mintAddress:n.mintAddress,walletAddress:n.walletAddress};return d({mintAddress:"",walletAddress:""}),l(ce({newRecipients:[e]}))}})})]})},Ie=()=>{const e=(0,s.useSelector)((e=>e.recipients)),{collection:t}=(0,s.useSelector)((e=>e.main)),A=I(t),{onAirdrop:r,loading:i}=oe(),n=(0,s.useDispatch)(),o=t&&A.length>=e.length;return(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[16,16],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Wallet Address"})}),(0,m.jsx)(a.Button,{disabled:!o,onClick:()=>{if(!o)return;const t=[...e];for(let e=0;e<t.length;e++){const r=t[e];r.mintAddress||(t[e]={...r,mintAddress:A[e].mintAddress.toBase58()})}console.log(t),n(pe(t))},children:"Auto fill"})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Ce,{})}),!!e.length&&(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Divider,{style:{margin:0}})}),e.map(((e,t)=>{let{mintAddress:A,walletAddress:r}=e;return(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Ce,{mintAddress:A,walletAddress:r,index:t})},A+t)})),(0,m.jsx)(a.Col,{span:24}),(0,m.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,m.jsx)(a.Button,{onClick:()=>r(e,t),type:"primary",loading:i,children:"CONFIRM"})})]})})},Ee="main",Be=(0,de.createAsyncThunk)("main/setCollection",(async e=>({collection:e}))),je=(0,de.createSlice)({name:Ee,initialState:{collection:""},reducers:{},extraReducers:e=>{e.addCase(Be.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)}))}}).reducer,be=()=>{var e,t;const[A,i]=(0,r.useState)(!1),{collection:n}=(0,s.useSelector)((e=>{let{main:t}=e;return t})),d=(()=>{const e=C(),t=(0,r.useMemo)((()=>{const t=[];for(const{collection:A}of e){if(!A)continue;const e=A.address.toBase58();t.includes(e)||t.push(e)}return t}),[e]);return t})(),l=(0,s.useDispatch)(),{nftData:c}=E(n);return(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(a.Button,{type:"ghost",style:{textAlign:c?"left":"center"},size:"large",ghost:!0,onClick:()=>i(!0),block:!0,children:c?(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Avatar,{size:24,src:null===(e=c.json)||void 0===e?void 0:e.image}),(0,m.jsx)(a.Typography.Text,{className:"caption",children:c.name||(null===(t=c.json)||void 0===t?void 0:t.name)})]}):(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(o.Z,{name:"chevron-down-outline"}),"Select collections NFT"]})}),(0,m.jsx)(a.Modal,{open:A,closeIcon:(0,m.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>i(!1),footer:null,style:{paddingBottom:0},children:(0,m.jsxs)(a.Row,{gutter:[0,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Select a collection NFT"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(fe,{onSelect:e=>{l(Be(e)),i(!1)},mintAddresses:d})})]})})]})};var ve=A(24656),Qe=A.n(ve);const Se=A.p+"static/media/icon-upload.cc31bf153c9179ce624dd23711edb5ac.svg",Me=()=>{const[e,t]=(0,r.useState)(!1),[A,i]=(0,r.useState)(),n=(0,s.useDispatch)(),d=async()=>{i(void 0),await n(pe([]))};return(0,m.jsx)(a.Spin,{spinning:e,children:(0,m.jsxs)(a.Row,{gutter:[24,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Upload.Dragger,{accept:".csv,.txt",maxCount:1,className:"upload-file",showUploadList:!1,progress:{strokeWidth:2,showInfo:!0},beforeUpload:async e=>{try{t(!0);const A=await(e=>new Promise(((t,A)=>Qe().parse(e,{skipEmptyLines:!0,complete:(e,A)=>{let{data:r}=e;return i(A),t(r)}}))))(e),r=[];for(const e of A)r.push({mintAddress:"",walletAddress:e});await n(ce({newRecipients:r}))}catch(A){}finally{t(!1)}},onRemove:d,children:(0,m.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,m.jsx)(a.Image,{src:Se,preview:!1}),(0,m.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,m.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,m.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,m.jsx)("code",{children:".csv"}),","," ",(0,m.jsx)("code",{children:".txt"}),"."]})]})]})})}),A&&(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Card,{bodyStyle:{padding:"8px 24px"},children:(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{type:"success",level:5,children:A.name})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(a.Button,{onClick:d,type:"text",icon:(0,m.jsx)(o.Z,{name:"trash-outline"})})})]})})})]})})},Pe=()=>{const{collection:e}=(0,s.useSelector)((e=>e.main)),t=I(e);return(0,m.jsx)(a.Card,{bordered:!0,children:(0,m.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsxs)(a.Space,{direction:"vertical",children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"Select your collection airdrop"}),(0,m.jsx)(be,{})]})}),(0,m.jsx)(a.Col,{children:(0,m.jsxs)(a.Space,{direction:"vertical",children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"Balance"}),t.length]})})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{gutter:24,children:[(0,m.jsx)(a.Col,{span:12,children:(0,m.jsxs)(a.Space,{direction:"vertical",style:{width:"100%"},children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"Start time"}),(0,m.jsx)(a.DatePicker,{style:{width:"100%"}})]})}),(0,m.jsx)(a.Col,{span:12,children:(0,m.jsxs)(a.Space,{direction:"vertical",style:{width:"100%"},children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"End time"}),(0,m.jsx)(a.DatePicker,{style:{width:"100%"}})]})})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Me,{})})]})})},Te=()=>(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{xs:24,md:10,children:(0,m.jsx)(Pe,{})}),(0,m.jsx)(a.Col,{xs:24,md:14,children:(0,m.jsx)(Ie,{})})]}),ke=e=>(0,s.useSelector)((t=>{let{distributors:A}=t;return A[e]})),De=e=>{var t,A;let{distributorAddress:i}=e;const n=(0,s.useSelector)((e=>{let{pools:t}=e;return t})),{mint:o}=ke(i),d=(0,r.useMemo)((()=>{const e=Object.keys(n).find((e=>n[e].mintLpt.toBase58()===o.toBase58()));if(!e)return"";return n[e].mint.toBase58()}),[o,n]),{nftData:l}=E(d);return(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Avatar,{size:24,src:null===l||void 0===l||null===(t=l.json)||void 0===t?void 0:t.image}),(0,m.jsx)(a.Typography.Text,{children:(null===l||void 0===l?void 0:l.name)||(null===l||void 0===l||null===(A=l.json)||void 0===A?void 0:A.name)})]})},Re=e=>{let{distributorAddress:t}=e;const A=(e=>{const[t,A]=(0,r.useState)(),s=Y(),i=(0,r.useCallback)((async()=>{const t=await s(e);return A(t)}),[e,s]);return(0,r.useEffect)((()=>{i()}),[i]),t})(t),s=(null===A||void 0===A?void 0:A.createAt)||0;return(0,m.jsx)(a.Typography.Text,{children:v()(1e3*s||"").format(P)})},Ke=e=>{let{distributorAddress:t}=e;return(0,m.jsx)(a.Button,{icon:(0,m.jsx)(o.Z,{name:"document-text-outline"})})},Ne=e=>{let{distributorAddress:t}=e;const{startedAt:A}=ke(t);return(0,m.jsx)(a.Typography.Text,{children:A.isZero()?"Immediately":v()(1e3*A.toNumber()).format(P)})},Ge=[{title:"CREATED DATE",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(Re,{distributorAddress:e})},{title:"UNLOCK DATE",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(Ne,{distributorAddress:e})},{title:"COLLECTION",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(De,{distributorAddress:e})},{title:"LIST RECEIVERS",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(Ke,{distributorAddress:e})}],qe=()=>{const e=(0,s.useSelector)((e=>{let{distributors:t}=e;return t})),t=(0,i.useWalletAddress)(),A=Object.keys(e).filter((A=>e[A].authority.toBase58()===t)).map((e=>({distributorAddress:e})));return(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{level:5,children:"History"})}),(0,m.jsx)(a.Col,{children:"Filter"}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Table,{rowKey:e=>e.distributorAddress,columns:Ge,dataSource:A,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})}),(0,m.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,m.jsx)(a.Button,{type:"ghost",children:"View more"})})]})})},Ye=()=>(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:3,children:"Airdrops"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Te,{})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(qe,{})}),(0,m.jsx)(a.Col,{span:24})]}),Ve=()=>{const{root:e,extend:t}=(0,i.useAppRoute)();return(0,m.jsxs)(a.Row,{gutter:[0,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(y,{})}),(0,m.jsx)(a.Col,{xs:24,xxl:16,className:"container",children:(0,m.jsxs)(n.Switch,{children:[(0,m.jsx)(n.Route,{exact:!0,path:t("/dashboard"),component:se}),(0,m.jsx)(n.Route,{exact:!0,path:t("/airdrop"),component:Ye}),(0,m.jsx)(n.Redirect,{from:"*",to:`${e}/dashboard`})]})})]})},Oe=e=>{let{children:t}=e;const A=(0,i.useWalletAddress)(),[s,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(s)return;const e=(0,ne.getAnchorProvider)(i.rpc,A,window.sentre.solana),t=new _(e,u.sol.leFlashId);window.leFlash=t,n(!0)}),[A,s]),s?(0,m.jsx)(r.Fragment,{children:t}):null};var ze=A(44994);const Le={},He=(0,ze.r)({}),Ue=e=>{const{program:t,name:A,filter:s,upset:i,init:n}=e,[a,o]=(0,r.useState)(0),[,d]=He(),{accountClient:l,connection:c}=(0,r.useMemo)((()=>{var e;const r=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[A];return{accountClient:r,connection:r.provider.connection}}),[A,null===t||void 0===t?void 0:t.account]),u=(0,r.useCallback)((async()=>{if(void 0===Le[A])try{Le[A]=!0,d({...Le,[A]:!0});const e=await l.all(s),t={};for(const A of e)t[A.publicKey.toBase58()]=A.account;await n(t)}catch(e){(0,ie.cB)(e)}finally{Le[A]=!1,d({...Le,[A]:!1})}}),[l,s,n,A,d]),p=(0,r.useCallback)((async()=>{if(a)return;const e=c.onProgramAccountChange(l.programId,(async e=>{const r=e.accountId.toBase58(),s=e.accountInfo.data,n=t.coder.accounts.decode(A,s);i(r,n)}),"confirmed",[{dataSize:l.size},{memcmp:{offset:0,bytes:(0,ne.encodeIxData)((0,ne.accountDiscriminator)(A))}},...s]);o(e)}),[l.programId,l.size,c,s,A,t.coder.accounts,i,a]);return(0,r.useEffect)((()=>{u()}),[u]),(0,r.useEffect)((()=>(p(),()=>{(async()=>{a&&await c.removeProgramAccountChangeListener(a)})()})),[c,p,a]),(0,m.jsx)(r.Fragment,{})},Fe="cheque",We=(0,de.createAsyncThunk)("cheque/initCheques",(async e=>e)),Xe=(0,de.createAsyncThunk)("cheque/upsetCheque",(async e=>{let{address:t,data:A}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!A)throw new Error("Data is empty");return{[t]:A}})),Ze=(0,de.createSlice)({name:Fe,initialState:{},reducers:{},extraReducers:e=>{e.addCase(We.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)})).addCase(Xe.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)}))}}).reducer,_e=[],Je=()=>{const e=(0,s.useDispatch)(),t=ae(),A=(0,r.useCallback)((t=>e(We(t))),[e]),i=(0,r.useCallback)(((t,A)=>e(Xe({address:t,data:A}))),[e]);return(0,m.jsx)(Ue,{program:t.program,name:"cheque",filter:_e,init:A,upset:i})},$e="distributor",et=(0,de.createAsyncThunk)("distributor/initDistributors",(async e=>e)),tt=(0,de.createAsyncThunk)("distributor/upsetDistributor",(async e=>{let{address:t,data:A}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!A)throw new Error("Data is empty");return{[t]:A}})),At=(0,de.createSlice)({name:$e,initialState:{},reducers:{},extraReducers:e=>{e.addCase(et.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)})).addCase(tt.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)}))}}).reducer,rt=[],st=()=>{const e=(0,s.useDispatch)(),t=ae(),A=(0,r.useCallback)((t=>e(et(t))),[e]),i=(0,r.useCallback)(((t,A)=>e(tt({address:t,data:A}))),[e]);return(0,m.jsx)(Ue,{program:t.program,name:"distributor",filter:rt,init:A,upset:i})},it="pool",nt=(0,de.createAsyncThunk)("pool/initPools",(async e=>e)),at=(0,de.createAsyncThunk)("pool/upsetPool",(async e=>{let{address:t,data:A}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!A)throw new Error("Data is empty");return{[t]:A}})),ot=(0,de.createSlice)({name:it,initialState:{},reducers:{},extraReducers:e=>{e.addCase(nt.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)})).addCase(at.fulfilled,((e,t)=>{let{payload:A}=t;Object.assign(e,A)}))}}).reducer,dt=[],lt=()=>{const e=(0,s.useDispatch)(),t=ae(),A=(0,r.useCallback)((t=>e(nt(t))),[e]),i=(0,r.useCallback)(((t,A)=>e(at({address:t,data:A}))),[e]);return(0,m.jsx)(Ue,{program:t.program,name:"pool",filter:dt,init:A,upset:i})},ct=e=>{let{children:t}=e;const[A]=He(),s=(0,r.useMemo)((()=>!Object.values(A).length||Object.values(A).includes(!0)),[A]);return(0,m.jsxs)(r.Fragment,{children:[(0,m.jsx)(st,{}),(0,m.jsx)(lt,{}),(0,m.jsx)(Je,{}),s?null:t]})};var ut=A(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const pt={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof x.rV.PublicKey||e instanceof x.BN||ut.isBuffer(e)}},gt=(0,de.configureStore)({middleware:e=>e(pt),devTools:!1,reducer:{main:je,recipients:ge,distributors:At,pools:ot,cheques:Ze}});var mt=A(45597);const{manifest:{appId:ht}}=u,yt=(0,r.memo)((()=>(0,m.jsx)(s.Provider,{store:gt,children:(0,m.jsx)(ct,{children:(0,m.jsx)(Oe,{children:(0,m.jsx)(Ve,{})})})}))),xt=()=>{const e=(0,i.useSetBackground)();return(0,r.useEffect)((()=>{e({light:"#1D2127",dark:"#1D2127"})}),[e]),(0,m.jsx)(yt,{})},ft=()=>(0,m.jsx)(i.AntdProvider,{appId:ht,prefixCls:ht,children:(0,m.jsx)(xt,{})})},83272:(e,t,A)=>{"use strict";e.exports=A.p+"static/media/README.ff93448fef94ea73029b.md"},69363:(e,t,A)=>{"use strict";e.exports=A.p+"static/media/logo.6ee3cf6a07d3e8cc5248.png"},70854:(e,t,A)=>{"use strict";e.exports=A.p+"static/media/panel.6ce7bc345912340df001.png"},7420:()=>{},95856:()=>{},46601:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx.8630f794.chunk.js.map