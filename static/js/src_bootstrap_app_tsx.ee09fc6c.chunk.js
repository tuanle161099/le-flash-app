(globalThis.webpackChunkle_flash=globalThis.webpackChunkle_flash||[]).push([["src_bootstrap_app_tsx"],{45597:(e,A,t)=>{"use strict";Object.defineProperty(A,"X$",{value:!0}),Object.defineProperty(A,"jY",{enumerable:!0,get:function(){return i.default}}),A.h0=void 0,Object.defineProperty(A,"ng",{enumerable:!0,get:function(){return s.default}});var r=n(t(70854)),i=n(t(69363)),s=n(t(83272));function n(e){return e&&e.__esModule?e:{default:e}}const a=[r.default];A.h0=a},87949:(e,A,t)=>{"use strict";t.r(A),t.d(A,{Background:()=>De,Layout:()=>Te,Page:()=>Ge,__esModule:()=>Ke.X$,logo:()=>Ke.jY,panels:()=>Ke.h0,readme:()=>Ke.ng});var r=t(92950),i=t(55754),s=t(49471),n=t(45055),a=t(32671),o=t(69716);const l={appId:"le_flash",url:"https://descartesnetwork.github.io/senhub/index.js"},d={devnet:{node:"https://api.devnet.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"},testnet:{node:"https://api.testnet.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"},mainnet:{node:"https://api.mainnet-beta.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"}},c={development:{senApiUpload:"https://api.sentre.io/storage/upload",aws:"https://sen-storage.s3.us-west-2.amazonaws.com/"},production:{senApiUpload:"https://api.sentre.io/storage/upload",aws:"https://sen-storage.s3.us-west-2.amazonaws.com/"}},u={manifest:{development:{...l},production:{...l}}[s.env],sol:d[s.net],api:c[s.env]},{manifest:{appId:g}}=u;var p=t(45263);const m=[{label:"Dashboard",key:"dashboard",icon:(0,p.jsx)(o.Z,{name:"images-outline"})},{label:"Airdrop",key:"airdrop",icon:(0,p.jsx)(o.Z,{name:"airplane-outline"})}],h=()=>{const[e,A]=(0,r.useState)("dashboard"),{pathname:t}=(0,n.useLocation)(),{appRoute:i,pushHistory:s}=(()=>{const e=(0,n.useLocation)(),A=(0,n.useHistory)(),t=(0,r.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),i=(0,r.useCallback)((e=>t.get(e)),[t]),s=(0,r.useCallback)((e=>{const A=new URLSearchParams;for(const t in e)A.set(t,e[t]);return A.toString()}),[]),a=(0,r.useMemo)((()=>`/app/${g}`),[]);return{getQuery:i,generateQuery:s,pushHistory:(0,r.useCallback)((e=>A.push(`${a}${e}`)),[a,A]),appRoute:a}})(),o=(0,r.useCallback)((()=>{const e=t.replace(`${i}/`,""),r=e.indexOf("/");return A(-1===r?e:e.slice(0,r))}),[i,t]);return(0,r.useEffect)((()=>{o()}),[o]),(0,p.jsx)(a.Row,{className:"header",children:(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Menu,{selectedKeys:[e],items:m,mode:"horizontal",onSelect:async e=>s("/"+e.key)})})})},y=()=>{const e=(0,i.useSelector)((e=>e.distributors));return console.log(e),(0,p.jsxs)(a.Row,{children:[(0,p.jsx)(a.Button,{type:"primary",children:"Primary"}),(0,p.jsx)(a.Button,{ghost:!0,type:"ghost",children:"Gh"})]})};var I=t(50794),B=t(7867),E=t(17604);B.bs58.encode(I.Wr.accountDiscriminator("distributor")),B.bs58.encode(I.Wr.accountDiscriminator("receipt"));const w={version:"0.1.0",name:"le_flash",instructions:[{name:"initializePool",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!0},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"mint",type:"publicKey"},{name:"treasury",type:"publicKey"}]},{name:"deposit",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"srcAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"recipient",type:"publicKey"}]},{name:"withdraw",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"dstAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amountOut",type:"u64"}]},{name:"withdrawNft",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"dstAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"closeCheque",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"cheque",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeDistributor",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!0},{name:"src",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"feeCollector",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"merkleRoot",type:{array:["u8",32]}},{name:"total",type:"u64"},{name:"endedAt",type:"i64"},{name:"startedAt",type:"i64"},{name:"metadata",type:{array:["u8",32]}},{name:"fee",type:"u64"}]},{name:"claim",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"receipt",isMut:!0,isSigner:!1},{name:"dst",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"feeCollector",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"proof",type:{vec:{array:["u8",32]}}},{name:"amount",type:"u64"},{name:"startedAt",type:"i64"},{name:"salt",type:{array:["u8",32]}},{name:"fee",type:"u64"},{name:"recipient",type:"publicKey"}]}],accounts:[{name:"cheque",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"amount",type:"u64"}]}},{name:"distributor",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"merkleRoot",type:{array:["u8",32]}},{name:"total",type:"u64"},{name:"claimed",type:"u64"},{name:"endedAt",type:"i64"},{name:"startedAt",type:"i64"},{name:"metadata",type:{array:["u8",32]}}]}},{name:"pool",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"treasury",type:"publicKey"},{name:"mintLpt",type:"publicKey"}]}},{name:"receipt",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"distributor",type:"publicKey"},{name:"recipient",type:"publicKey"},{name:"startedAt",type:"i64"},{name:"claimedAt",type:"i64"},{name:"salt",type:{array:["u8",32]}}]}}],events:[{name:"CloseChequeEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1}]},{name:"DepositEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1},{name:"amountIn",type:"u64",index:!1},{name:"lptPrintAmount",type:"u64",index:!1}]},{name:"InitializePoolEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"treasury",type:"publicKey",index:!1}]},{name:"ClaimEvent",fields:[{name:"destination",type:"publicKey",index:!1},{name:"recipient",type:"publicKey",index:!1},{name:"startedAt",type:"i64",index:!1},{name:"claimedAt",type:"i64",index:!1},{name:"claimed",type:"u64",index:!1}]},{name:"InitializeDistributorEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"distributor",type:"publicKey",index:!1},{name:"merkleRoot",type:{array:["u8",32]},index:!1},{name:"total",type:"u64",index:!1},{name:"endedAt",type:"i64",index:!1},{name:"metadata",type:{array:["u8",32]},index:!1}]},{name:"RevokeEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"distributor",type:"publicKey",index:!1},{name:"remaining",type:"u64",index:!1}]},{name:"WithdrawNFTEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1}]},{name:"WithdrawEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"amountOut",type:"u64",index:!1},{name:"amountLpt",type:"u64",index:!1}]}],errors:[{code:6e3,name:"InvalidNftCollection",msg:"Invalid NFT collection"},{code:6001,name:"NotWithDraw",msg:"NFT has not been retrieved"},{code:6002,name:"Overflow",msg:"Operation overflowed"},{code:6003,name:"InvalidMerkleProof",msg:"Invalid merkle proof"},{code:6004,name:"InvalidCurrentDate",msg:"Cannot get current date"},{code:6005,name:"EndedCampaign",msg:"The campaign has been ended"},{code:6006,name:"NotStartedCampaign",msg:"The campaign is not started yet"},{code:6007,name:"NotEndedCampaign",msg:"The campaign is not ended yet"},{code:6008,name:"NoBump",msg:"Cannot derive the program address"}]},C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new I.rV.Keypair).publicKey.toBase58();return{fee:new I.BN(0),feeCollectorAddress:e}};t(71256);var f=t(38073),x=t(97429).Buffer;const b=e=>{if(!e)return!1;try{if(!new I.rV.PublicKey(e))throw new Error("Invalid public key");return!0}catch(A){return!1}},Q=async e=>await f.O2.metadata.Metadata.getPDA(new I.rV.PublicKey(e)),j=async(e,A,t,r)=>{const[i]=await I.rV.PublicKey.findProgramAddress([x.from("receipt"),e,A.toBuffer(),t.toBuffer()],r);return i};var v=t(59186),S=t(97429).Buffer;const M={rent:I.rV.SYSVAR_RENT_PUBKEY,systemProgram:I.rV.SystemProgram.programId,associatedTokenProgram:I.P6.token.ASSOCIATED_PROGRAM_ID,tokenProgram:v.H_};const P=class{constructor(e,A){var t=this;if(this._provider=void 0,this.program=void 0,this.deriveTreasurerAddress=async e=>{if("string"!==typeof e&&(e=e.toBase58()),!b(e))throw new Error("Invalid pool address");const A=new I.rV.PublicKey(e),[t]=await I.rV.PublicKey.findProgramAddress([S.from("treasurer"),A.toBuffer()],this.program.programId);return t.toBase58()},this.deriveChequeAddress=async function(e){let A=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!b(e))throw new Error("Invalid proposal address");const r=new I.rV.PublicKey(e),i=t._provider.wallet.publicKey,[s]=await await I.rV.PublicKey.findProgramAddress([S.from("cheque"),r.toBuffer(),i.toBuffer()],t.program.programId),n=s.toBase58();if(A){let A,r;try{const{authority:e,pool:i}=await t.getChequeData(n);A=e.toBase58(),r=i.toBase58()}catch(a){throw new Error(`This cheque ${n} is not initialized yet`)}if(t._provider.wallet.publicKey.toBase58()!==A)throw new Error("Violated authority address");if(e!==r)throw new Error("Violated proposal address")}return n},this.getPoolData=async e=>this.program.account.pool.fetch(e),this.getChequeData=async e=>this.program.account.cheque.fetch(e),this.fetchCheques=async()=>this.program.account.cheque.all(),this.initializePool=async e=>{let{pool:A=I.rV.Keypair.generate(),mintLpt:t=I.rV.Keypair.generate(),sendAndConfirm:r=!0,mint:i}=e;const s=A,n=s.publicKey.toBase58(),a=await this.deriveTreasurerAddress(n),o=await I.P6.token.associatedAddress({mint:new I.rV.PublicKey(t.publicKey),owner:new I.rV.PublicKey(this._provider.wallet.publicKey)}),l=await I.P6.token.associatedAddress({mint:new I.rV.PublicKey(i),owner:new I.rV.PublicKey(a)}),d=await this.program.methods.initializePool(i,l).accounts({associatedTokenAccountLpt:o,authority:this._provider.wallet.publicKey,mintLpt:t.publicKey,pool:n,treasurer:a,...M}).transaction();let c="";return r&&(this._provider.opts.skipPreflight=!0,c=await this._provider.sendAndConfirm(d,[s,t])),{txId:c,poolAddress:s.publicKey.toBase58(),tx:d}},this.deposit=async e=>{let{recipient:A=this._provider.wallet.publicKey.toBase58(),poolAddress:t,sendAndConfirm:r=!0,mintNFTAddress:i,chequeKeypair:s=I.rV.Keypair.generate()}=e;const n=new I.rV.PublicKey(A),{mintLpt:a}=await this.getPoolData(t),o=await this.deriveTreasurerAddress(t),l=(await Q(new I.rV.PublicKey(i))).toBase58(),d=await I.P6.token.associatedAddress({mint:a,owner:new I.rV.PublicKey(this._provider.wallet.publicKey)}),c=await I.P6.token.associatedAddress({mint:new I.rV.PublicKey(i),owner:new I.rV.PublicKey(this._provider.wallet.publicKey)}),u=await I.P6.token.associatedAddress({mint:new I.rV.PublicKey(i),owner:new I.rV.PublicKey(o)}),g=s.publicKey.toBase58();let p=await this.program.methods.deposit(n).accounts({authority:this._provider.wallet.publicKey,pool:t,associatedTokenAccountLpt:d,mint:i,mintLpt:a,srcAssociatedTokenAccount:c,treasurer:o,treasury:u,cheque:g,metadata:l,...M}).transaction(),m="";return r&&(this._provider.opts.skipPreflight=!0,m=await this._provider.sendAndConfirm(p,[s])),{txId:m,tx:p,chequeAddress:s.publicKey.toBase58()}},this.withdrawNFT=async e=>{let{chequeAddress:A,sendAndConfirm:t=!0}=e;const{pool:r,mint:i}=await this.getChequeData(A),{mintLpt:s}=await this.getPoolData(r),n=await this.deriveTreasurerAddress(r),a=(await Q(new I.rV.PublicKey(i))).toBase58(),o=await I.P6.token.associatedAddress({mint:s,owner:new I.rV.PublicKey(this._provider.wallet.publicKey)}),l=await I.P6.token.associatedAddress({mint:i,owner:new I.rV.PublicKey(this._provider.wallet.publicKey)}),d=await I.P6.token.associatedAddress({mint:new I.rV.PublicKey(i),owner:new I.rV.PublicKey(n)});let c=await this.program.methods.withdrawNft().accounts({authority:this._provider.wallet.publicKey,pool:r,associatedTokenAccountLpt:o,mint:i,mintLpt:s,dstAssociatedTokenAccount:l,treasurer:n,treasury:d,metadata:a,cheque:A,...M}).transaction(),u="";return t&&(u=await this._provider.sendAndConfirm(c,[])),{txId:u,tx:c}},this.closeCheque=async e=>{let{chequeAddress:A,sendAndConfirm:t=!0}=e;const r=new I.rV.PublicKey(A),i=await this.program.methods.closeCheque().accounts({authority:this._provider.wallet.publicKey,cheque:r,...M}).transaction();let s="";return console.log(i,"tx"),t&&(s=await this._provider.sendAndConfirm(i,[])),{txId:s,tx:i}},this.parseDistributorData=e=>this.program.coder.accounts.decode("distributor",e),this.getDistributorData=async e=>this.program.account.distributor.fetch(e),this.parseReceiptData=e=>this.program.coder.accounts.decode("receipt",e),this.getReceiptData=async e=>this.program.account.receipt.fetch(e),this.deriveReceiptAddress=async function(e,A){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(32!==e.length)throw new Error("The salt must has length 32");if(!b(A))throw new Error("Invalid distributor address");const i=await j(e,new I.rV.PublicKey(A),t._provider.wallet.publicKey,t.program.programId),s=i.toBase58();if(r){let r,i,a;try{const{authority:e,distributor:A,salt:n}=await t.getReceiptData(s);r=e.toBase58(),i=A.toBase58(),a=S.from(n)}catch(n){throw new Error(`This receipt ${s} is not initialized yet`)}if(t._provider.wallet.publicKey.toBase58()!==r)throw new Error("Violated authority address");if(A!==i)throw new Error("Violated proposal address");if(0!==e.compare(a))throw new Error("Violated salt")}return s},this.deriveDistributorTreasurerAddress=async e=>{if(!b(e))throw new Error("Invalid distributor address");const A=new I.rV.PublicKey(e),[t]=await I.rV.PublicKey.findProgramAddress([S.from("treasurer"),A.toBuffer()],this.program.programId);return t.toBase58()},this.initializeDistributor=async e=>{let{tokenAddress:A,total:t,merkleRoot:r,metadata:i,startedAt:s=0,endedAt:n=0,distributor:a=I.rV.Keypair.generate(),feeOptions:o=C(this._provider.wallet.publicKey.toBase58()),sendAndConfirm:l=!0}=e;const{fee:d,feeCollectorAddress:c}=o;if(!b(c))throw new Error("Invalid fee collector address");if(!b(A))throw new Error("Invalid token address");if(!(u=r)||32!==u.length)throw new Error("Invalid merkle root");var u;if(t.isNeg())throw new Error("The total must not be negative");if(32!==i.length)throw new Error("Invalid metadata path");const g=a.publicKey.toBase58(),p=new I.rV.PublicKey(A),m=await I.P6.token.associatedAddress({mint:p,owner:this._provider.wallet.publicKey}),h=await this.deriveDistributorTreasurerAddress(g),y=new I.rV.PublicKey(h),B=await I.P6.token.associatedAddress({mint:p,owner:y}),E=await this.program.methods.initializeDistributor([...r],t,new I.BN(n),new I.BN(s),[...i],d).accounts({authority:this._provider.wallet.publicKey,distributor:a.publicKey,src:m,treasurer:y,treasury:B,feeCollector:new I.rV.PublicKey(c),mint:p,tokenProgram:I.P6.token.TOKEN_PROGRAM_ID,associatedTokenProgram:I.P6.token.ASSOCIATED_PROGRAM_ID,systemProgram:I.rV.SystemProgram.programId,rent:I.rV.SYSVAR_RENT_PUBKEY}).signers([a]);return{tx:await E.transaction(),txId:l?await E.rpc({commitment:"confirmed"}):"",distributorAddress:g}},this.claim=async e=>{let{distributorAddress:A,proof:t,data:r,feeOptions:i=C(this._provider.wallet.publicKey.toBase58()),sendAndConfirm:s=!0}=e;const{fee:n,feeCollectorAddress:a}=i;if(!b(a))throw new Error("Invalid fee collector address");if(!b(A))throw new Error("Invalid distributor address");if(!this._provider.wallet.publicKey.equals(r.authority))throw new Error("Invalid athority address");const{mint:o}=await this.getDistributorData(A),l=await this.deriveReceiptAddress(r.salt,A),d=await I.P6.token.associatedAddress({mint:o,owner:this._provider.wallet.publicKey}),c=await this.deriveDistributorTreasurerAddress(A),u=new I.rV.PublicKey(c),g=await I.P6.token.associatedAddress({mint:o,owner:u}),p=await this.program.methods.claim(t.map((e=>e.toJSON().data)),new I.BN(1),r.startedAt,r.salt.toJSON().data,n,r.chequeAddress).accounts({authority:this._provider.wallet.publicKey,distributor:new I.rV.PublicKey(A),receipt:new I.rV.PublicKey(l),dst:d,treasurer:u,treasury:g,feeCollector:new I.rV.PublicKey(a),mint:o,tokenProgram:I.P6.token.TOKEN_PROGRAM_ID,associatedTokenProgram:I.P6.token.ASSOCIATED_PROGRAM_ID,systemProgram:I.rV.SystemProgram.programId,rent:I.rV.SYSVAR_RENT_PUBKEY});return{tx:await p.transaction(),txId:s?await p.rpc({commitment:"confirmed"}):"",dstAddress:d.toBase58()}},!b(A))throw new Error("Invalid program id");this._provider=e,this.program=new I.$r(w,A,this._provider)}};var R=t(16348),K=t(97429).Buffer;const k=104;class T{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.receipients=void 0,this.leafs=void 0,this.getTotal=()=>new I.BN(this.receipients.length),this.toBuffer=()=>K.concat(this.receipients.map(T.serialize)),this.getLeaf=e=>{const A=T.serialize(e);return K.from(R.keccak_256.digest(A))},this.getParent=(e,A)=>{if(!e||!A)throw new Error("Invalid child");const t=K.concat(T.sort(e,A));return K.from(R.keccak_256.digest(t))},this.getSibling=(e,A)=>{const t=A.findIndex((A=>0===A.compare(e)));if(-1===t)throw new Error("Invalid child");return t%2===1?A[t-1]:A[t+1]},this.nextLayer=e=>{const A=[...e];if(0===A.length)throw new Error("Invalid tree");if(1===A.length)return A;const t=A.length%2===1?A.pop():void 0,r=[];for(let i=0;i<A.length;i+=2)r.push(this.getParent(A[i],A[i+1]));return t?[...r,t]:r},this.deriveMerkleRoot=()=>{let e=this.leafs;for(;e.length>1;)e=this.nextLayer(e);return e[0]},this.deriveProof=e=>{let A=this.getLeaf(e);const t=[];let r=this.leafs;for(;r.length>1;){const e=this.getSibling(A,r);e&&(A=this.getParent(A,e),t.push(e)),r=this.nextLayer(r)}return t},this.verifyProof=(e,A)=>{let t=this.getLeaf(A);for(const r of e)t=this.getParent(t,r);return 0===this.deriveMerkleRoot().compare(t)},this.receipients=e,this.leafs=T.sort(...this.receipients.map((e=>this.getLeaf(e))))}}T.sort=function(){for(var e=arguments.length,A=new Array(e),t=0;t<e;t++)A[t]=arguments[t];return[...A].sort(((e,A)=>{const t=K.compare(e,A);if(0===t)throw new Error("The receipients has a duplication");return t}))},T.serialize=e=>{let{authority:A,chequeAddress:t,startedAt:r,salt:i}=e;return K.concat([A.toBuffer(),t.toBuffer(),r.toArrayLike(K,"le",8),i])},T.deserialize=e=>{if(e.length!==k)throw new Error("Invalid buffer");return{authority:new I.rV.PublicKey(e.subarray(0,32)),chequeAddress:new I.rV.PublicKey(e.subarray(32,64)),startedAt:new I.BN(e.subarray(64,72),"le"),salt:K.from(e.subarray(72,104))}},T.salt=e=>{let A="";for(;A.length<128;)A+=Math.round(10*Math.random()).toString();const t=e||A;return K.from(R.keccak_256.digest(t))},T.fromBuffer=e=>{if(e.length%k!==0)throw new Error("Invalid buffer");let A=[];for(let t=0;t<e.length;t+=k)A.push(T.deserialize(e.subarray(t,t+k)));return new T(A)};var D=t(21995),G=t.n(D);var N=t(4065);const Y=()=>{const e=(0,s.useWalletAddress)();return(0,r.useMemo)((()=>{const A=(0,N.getAnchorProvider)(s.rpc,e,window.sentre.solana);return new P(A,u.sol.leFlashId)}),[e])},V=()=>{const[e,A]=(0,r.useState)(!1),t=(0,r.useCallback)((async e=>{const A=new FormData;A.append("file",e);const{data:t}=await G().post(u.api.senApiUpload,A,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});return t.cid}),[]),i=Y();return{onAirdrop:(0,r.useCallback)((async(e,r)=>{try{A(!0);let s=[];const{poolAddress:n}=await i.initializePool({mint:new I.rV.PublicKey(r)}),a=[];for(const{walletAddress:A,mintAddress:t}of e){const e=I.rV.Keypair.generate(),{tx:r,chequeAddress:o}=await i.deposit({recipient:A,mintNFTAddress:t,sendAndConfirm:!1,poolAddress:n,chequeKeypair:e});s.push({tx:r,signers:[e]}),a.push({walletAddress:A,chequeAddress:o,mintAddress:t})}const o=a.map(((e,A)=>{let{chequeAddress:t,walletAddress:r}=e;return{authority:new I.rV.PublicKey(r),chequeAddress:new I.rV.PublicKey(t||""),startedAt:new I.BN(Date.now()/1e3),salt:T.salt(`le-flash/${A.toString()}`)}})),l=new T(o),d=l.toBuffer(),c={checked:!1,createAt:Math.floor(Date.now()/1e3),data:d},u=[new Blob([JSON.stringify({data:c},null,2)],{type:"application/json"})],g=new File(u,"metadata.txt"),p=await t(g),m=B.bs58.decode(p),{mintLpt:h}=await i.getPoolData(n),y=I.rV.Keypair.generate(),{txId:w,tx:C}=await i.initializeDistributor({tokenAddress:h.toBase58(),total:l.getTotal(),merkleRoot:l.deriveMerkleRoot(),metadata:m,endedAt:0,distributor:y,sendAndConfirm:!1});return s.push({tx:C,signers:[y]}),await i._provider.sendAll(s.map((e=>{let{tx:A,signers:t}=e;return{tx:A,signers:t}}))),(0,E.t5)("Initialize new airdrop successfully!",w)}catch(s){(0,E.cB)(s)}finally{A(!1)}}),[i,t]),loading:e}};var z=t(67096);const O=()=>(0,r.useMemo)((()=>new z.I(s.connection)),[]),q=()=>{const[e,A]=(0,r.useState)([]),t=O(),i=(0,s.useWalletAddress)(),n=(0,r.useCallback)((async()=>{const e=await t.nfts().findAllByOwner({owner:new I.rV.PublicKey(i)});return A(e)}),[i,t]);return(0,r.useEffect)((()=>{n()}),[n]),e},L=e=>{const A=q();return(0,r.useMemo)((()=>{const t=[];for(const r of A)r.collection&&r.collection.address.toBase58()===e&&t.push(r);return t}),[e,A])},H=e=>{const[A,t]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),n=O(),a=(0,r.useCallback)((async()=>{if(e)try{t(!0);const A=await n.nfts().findByMint({mintAddress:new I.rV.PublicKey(e)});return s(A)}catch(A){console.log(A)}finally{t(!1)}}),[n,e]);return(0,r.useEffect)((()=>{a()}),[a]),{nftData:i,loading:A}};var U=t(19289);const F="recipients",W=(0,U.createAsyncThunk)(`${F}/addRecipient`,(async(e,A)=>{let{newRecipients:t}=e,{getState:r}=A;const{recipients:i}=r();return[...[...i],...t]})),X=(0,U.createAsyncThunk)(`${F}/removeRecipient`,(async(e,A)=>{let{index:t}=e,{getState:r}=A;const{recipients:i}=r(),s=[...i];return s.splice(t,1),[...s]})),Z=(0,U.createAsyncThunk)(`${F}/setRecipient`,(async e=>e)),J=(0,U.createSlice)({name:F,initialState:[],reducers:{},extraReducers:e=>{e.addCase(W.fulfilled,((e,A)=>{let{payload:t}=A;Object.assign(e,t)})).addCase(X.fulfilled,((e,A)=>{let{payload:t}=A;return t})).addCase(Z.fulfilled,((e,A)=>{let{payload:t}=A;return t}))}}).reducer;var _=t(51518),$=t.n(_);const ee=e=>{let{address:A}=e;const[t,i]=(0,r.useState)(!1);return(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Typography.Text,{type:"secondary",className:"t-16",children:s.util.shortenAddress(A,3)}),(0,p.jsx)(a.Tooltip,{title:"Copied",open:t,children:(0,p.jsx)($(),{text:A,onCopy:async()=>{i(!0),await s.util.asyncWait(1500),i(!1)},children:(0,p.jsx)(a.Typography.Text,{style:{cursor:"pointer"},className:"t-16",children:(0,p.jsx)(o.Z,{name:"copy-outline"})})})})]})},Ae=e=>{var A,t;let{mintAddress:r,onSelect:i,showName:s=!1,size:n}=e;const{nftData:o,loading:l}=H(r);return(0,p.jsx)(a.Spin,{spinning:l,children:(0,p.jsxs)(a.Row,{gutter:[12,12],style:{cursor:"pointer"},children:[(0,p.jsx)(a.Col,{span:24,style:{textAlign:"center",width:n},onClick:()=>i?i(r):null,children:(0,p.jsx)(a.Image,{src:(null===o||void 0===o||null===(A=o.json)||void 0===A?void 0:A.image)||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAYAAACadoJwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABbySURBVHgB7d2NTht3vsfh2S5NgPDahHIQ6v1fUKW9gQhFUUoxL00INMnJzxzv5nQbz9ie+WKb55GsdovBiFnBfPx/+8evv/7rSwMAADC8Lz80AAAAIQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAA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o6OXpmM9EXW9a/Srrj0A8/EXE2AB9S64dQBPQy24r2stPgAWYwQEYEEVH69fn413vdrdfbFWp6Hzn+2Xawc0ABbnryRAT+oGtd4d39zcHJ8jIURW2/39n+PT77scQAlAd/46AvSoRkMqQupR52pUjGxtPW/++c+N5scfN6wVWVIVGJ8+ff4aHXfNhw8fx9OtnG4OMAwBAjCQuomtx9c30AGA/+OtOAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAICYjQYAAGA2X5r5fPlf5FkMkmAd32wAAAAASUVORK5CYII=",preview:!1,style:{borderRadius:4,aspectRatio:"1",objectFit:"cover"}})}),s&&(0,p.jsx)(a.Col,{span:24,style:{textAlign:"left"},children:(0,p.jsxs)(a.Row,{children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{ellipsis:{tooltip:!0},level:5,children:(null===o||void 0===o?void 0:o.name)||(null===o||void 0===o||null===(t=o.json)||void 0===t?void 0:t.name)})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ee,{address:r})})]})})]})})},te=e=>{let{mintAddresses:A,onSelect:t=(()=>{})}=e;return(0,p.jsx)(a.Row,{gutter:[8,8],className:"scrollbar",style:{maxHeight:400,overflowY:"hidden"},children:A.map((e=>(0,p.jsx)(a.Col,{onClick:()=>t(e),span:8,children:(0,p.jsx)(Ae,{mintAddress:e,showName:!0})},e)))})},re=e=>{var A,t;let{onMintSelect:s=(()=>{}),mintAddress:n="",disabled:l=!1}=e;const[d,c]=(0,r.useState)(!1),[u,g]=(0,r.useState)(n),m=(0,i.useSelector)((e=>{let{main:A}=e;return A.collection})),h=(0,i.useSelector)((e=>{let{recipients:A}=e;return A})),y=L(m),I=h.map((e=>{let{mintAddress:A}=e;return A})),B=y.map((e=>e.mintAddress.toBase58())).filter((e=>![u,...I].includes(e))),{nftData:E}=H(u);return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(a.Button,{type:"ghost",style:{textAlign:n?"left":"center"},ghost:!0,block:!0,onClick:()=>c(!0),disabled:!m||l,children:n?(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Avatar,{size:24,src:null===E||void 0===E||null===(A=E.json)||void 0===A?void 0:A.image}),(0,p.jsx)(a.Typography.Text,{className:"caption",children:(null===E||void 0===E?void 0:E.name)||(null===E||void 0===E||null===(t=E.json)||void 0===t?void 0:t.name)})]}):(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(o.Z,{name:"chevron-down-outline"}),"Select NFT"]})}),(0,p.jsx)(a.Modal,{open:d,closeIcon:(0,p.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>c(!1),footer:null,style:{paddingBottom:0},children:(0,p.jsxs)(a.Row,{gutter:[0,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:4,children:"Select a NFT"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(te,{onSelect:e=>{g(e),s(e),c(!1)},mintAddresses:B})})]})})]})},ie=e=>{let{mintAddress:A,walletAddress:t,index:s=0}=e;const[n,l]=(0,r.useState)({mintAddress:A,walletAddress:t}),d=(0,i.useDispatch)(),c=(e,A)=>l({...n,[e]:A});return(0,p.jsxs)(a.Row,{gutter:16,children:[(0,p.jsx)(a.Col,{span:14,children:(0,p.jsx)(a.Input,{value:n.walletAddress,placeholder:"Input recipient's address",onChange:e=>c("walletAddress",e.target.value),disabled:!!A})}),(0,p.jsx)(a.Col,{span:8,children:(0,p.jsx)(re,{onMintSelect:e=>c("mintAddress",e),mintAddress:n.mintAddress,disabled:!!A})}),(0,p.jsx)(a.Col,{span:2,children:t?(0,p.jsx)(a.Button,{type:"ghost",ghost:!0,icon:(0,p.jsx)(a.Typography.Text,{type:"danger",children:(0,p.jsx)(o.Z,{name:"remove-circle-outline"})}),block:!0,onClick:()=>d(X({index:s}))}):(0,p.jsx)(a.Button,{type:"ghost",ghost:!0,icon:(0,p.jsx)(o.Z,{name:"add-circle-outline"}),block:!0,onClick:()=>{if(!n.mintAddress||!n.walletAddress||!n)return;const e={mintAddress:n.mintAddress,walletAddress:n.walletAddress};return l({mintAddress:"",walletAddress:""}),d(W({newRecipients:[e]}))}})})]})},se=()=>{const e=(0,i.useSelector)((e=>e.recipients)),{collection:A}=(0,i.useSelector)((e=>e.main)),t=L(A),{onAirdrop:r,loading:s}=V(),n=(0,i.useDispatch)(),o=A&&t.length>=e.length;return(0,p.jsx)(a.Card,{children:(0,p.jsxs)(a.Row,{gutter:[16,16],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{align:"middle",children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Title,{level:4,children:"Wallet Address"})}),(0,p.jsx)(a.Button,{disabled:!o,onClick:()=>{if(!o)return;const A=[...e];for(let e=0;e<A.length;e++){const r=A[e];r.mintAddress||(A[e]={...r,mintAddress:t[e].mintAddress.toBase58()})}console.log(A),n(Z(A))},children:"Auto fill"})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ie,{})}),!!e.length&&(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Divider,{style:{margin:0}})}),e.map(((e,A)=>{let{mintAddress:t,walletAddress:r}=e;return(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ie,{mintAddress:t,walletAddress:r,index:A})},t+A)})),(0,p.jsx)(a.Col,{span:24}),(0,p.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,p.jsx)(a.Button,{onClick:()=>r(e,A),type:"primary",loading:s,children:"CONFIRM"})})]})})},ne="main",ae=(0,U.createAsyncThunk)("main/setCollection",(async e=>({collection:e}))),oe=(0,U.createSlice)({name:ne,initialState:{collection:""},reducers:{},extraReducers:e=>{e.addCase(ae.fulfilled,((e,A)=>{let{payload:t}=A;Object.assign(e,t)}))}}).reducer,le=()=>{var e,A;const[t,s]=(0,r.useState)(!1),{collection:n}=(0,i.useSelector)((e=>{let{main:A}=e;return A})),l=(()=>{const e=q();return(0,r.useMemo)((()=>{const A=[];for(const{collection:t}of e){if(!t)continue;const e=t.address.toBase58();A.includes(e)||A.push(e)}return A}),[e])})(),d=(0,i.useDispatch)(),{nftData:c}=H(n);return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(a.Button,{type:"ghost",style:{textAlign:c?"left":"center"},size:"large",ghost:!0,onClick:()=>s(!0),block:!0,children:c?(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(a.Avatar,{size:24,src:null===(e=c.json)||void 0===e?void 0:e.image}),(0,p.jsx)(a.Typography.Text,{className:"caption",children:c.name||(null===(A=c.json)||void 0===A?void 0:A.name)})]}):(0,p.jsxs)(a.Space,{children:[(0,p.jsx)(o.Z,{name:"chevron-down-outline"}),"Select collections NFT"]})}),(0,p.jsx)(a.Modal,{open:t,closeIcon:(0,p.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>s(!1),footer:null,style:{paddingBottom:0},children:(0,p.jsxs)(a.Row,{gutter:[0,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:4,children:"Select a collection NFT"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(te,{onSelect:e=>{d(ae(e)),s(!1)},mintAddresses:l})})]})})]})};var de=t(24656),ce=t.n(de);const ue=t.p+"static/media/icon-upload.cc31bf153c9179ce624dd23711edb5ac.svg",ge=()=>{const[e,A]=(0,r.useState)(!1),[t,s]=(0,r.useState)(),n=(0,i.useDispatch)(),l=async()=>{s(void 0),await n(Z([]))};return(0,p.jsx)(a.Spin,{spinning:e,children:(0,p.jsxs)(a.Row,{gutter:[24,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Upload.Dragger,{accept:".csv,.txt",maxCount:1,className:"upload-file",showUploadList:!1,progress:{strokeWidth:2,showInfo:!0},beforeUpload:async e=>{try{A(!0);const t=await(e=>new Promise(((A,t)=>ce().parse(e,{skipEmptyLines:!0,complete:(e,t)=>{let{data:r}=e;return s(t),A(r)}}))))(e),r=[];for(const e of t)r.push({mintAddress:"",walletAddress:e});await n(W({newRecipients:r}))}catch(t){}finally{A(!1)}},onRemove:l,children:(0,p.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,p.jsx)(a.Image,{src:ue,preview:!1}),(0,p.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,p.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,p.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,p.jsx)("code",{children:".csv"}),","," ",(0,p.jsx)("code",{children:".txt"}),"."]})]})]})})}),t&&(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Card,{bodyStyle:{padding:"8px 24px"},children:(0,p.jsxs)(a.Row,{align:"middle",children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsx)(a.Typography.Title,{type:"success",level:5,children:t.name})}),(0,p.jsx)(a.Col,{children:(0,p.jsx)(a.Button,{onClick:l,type:"text",icon:(0,p.jsx)(o.Z,{name:"trash-outline"})})})]})})})]})})},pe=()=>{const{collection:e}=(0,i.useSelector)((e=>e.main)),A=L(e);return(0,p.jsx)(a.Card,{bordered:!0,children:(0,p.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{align:"middle",children:[(0,p.jsx)(a.Col,{flex:"auto",children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(a.Typography.Title,{level:5,children:"Select your collection airdrop"}),(0,p.jsx)(le,{})]})}),(0,p.jsx)(a.Col,{children:(0,p.jsxs)(a.Space,{direction:"vertical",children:[(0,p.jsx)(a.Typography.Title,{level:5,children:"Balance"}),A.length]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsxs)(a.Row,{gutter:24,children:[(0,p.jsx)(a.Col,{span:12,children:(0,p.jsxs)(a.Space,{direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(a.Typography.Title,{level:5,children:"Start time"}),(0,p.jsx)(a.DatePicker,{style:{width:"100%"}})]})}),(0,p.jsx)(a.Col,{span:12,children:(0,p.jsxs)(a.Space,{direction:"vertical",style:{width:"100%"},children:[(0,p.jsx)(a.Typography.Title,{level:5,children:"End time"}),(0,p.jsx)(a.DatePicker,{style:{width:"100%"}})]})})]})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(ge,{})})]})})},me=()=>(0,p.jsxs)(a.Row,{gutter:[32,32],children:[(0,p.jsx)(a.Col,{xs:24,md:10,children:(0,p.jsx)(pe,{})}),(0,p.jsx)(a.Col,{xs:24,md:14,children:(0,p.jsx)(se,{})})]}),he=()=>(0,p.jsxs)(a.Row,{gutter:[32,32],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(a.Typography.Title,{level:3,children:"Airdrops"})}),(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(me,{})})]}),ye=()=>{const{root:e,extend:A}=(0,s.useAppRoute)();return(0,p.jsxs)(a.Row,{gutter:[0,24],children:[(0,p.jsx)(a.Col,{span:24,children:(0,p.jsx)(h,{})}),(0,p.jsx)(a.Col,{xs:24,xxl:16,className:"container",children:(0,p.jsxs)(n.Switch,{children:[(0,p.jsx)(n.Route,{exact:!0,path:A("/dashboard"),component:y}),(0,p.jsx)(n.Route,{exact:!0,path:A("/airdrop"),component:he}),(0,p.jsx)(n.Redirect,{from:"*",to:`${e}/dashboard`})]})})]})},Ie=e=>{let{children:A}=e;const t=(0,s.useWalletAddress)(),[i,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(i)return;const e=(0,N.getAnchorProvider)(s.rpc,t,window.sentre.solana),A=new P(e,u.sol.leFlashId);window.leFlash=A,n(!0)}),[t,i]),i?(0,p.jsx)(r.Fragment,{children:A}):null};var Be=t(44994);const Ee={},we=(0,Be.r)({}),Ce=e=>{const{program:A,name:t,filter:i,upset:s,init:n}=e,[a,o]=(0,r.useState)(0),[,l]=we(),{accountClient:d,connection:c}=(0,r.useMemo)((()=>{var e;const r=null===A||void 0===A||null===(e=A.account)||void 0===e?void 0:e[t];return{accountClient:r,connection:r.provider.connection}}),[t,null===A||void 0===A?void 0:A.account]),u=(0,r.useCallback)((async()=>{if(void 0===Ee[t])try{Ee[t]=!0,l({...Ee,[t]:!0});const e=await d.all(i),A={};for(const t of e)A[t.publicKey.toBase58()]=t.account;await n(A)}catch(e){(0,E.cB)(e)}finally{Ee[t]=!1,l({...Ee,[t]:!1})}}),[d,i,n,t,l]),g=(0,r.useCallback)((async()=>{if(a)return;const e=c.onProgramAccountChange(d.programId,(async e=>{const r=e.accountId.toBase58(),i=e.accountInfo.data,n=A.coder.accounts.decode(t,i);s(r,n)}),"confirmed",[{dataSize:d.size},{memcmp:{offset:0,bytes:(0,N.encodeIxData)((0,N.accountDiscriminator)(t))}},...i]);o(e)}),[d.programId,d.size,c,i,t,A.coder.accounts,s,a]);return(0,r.useEffect)((()=>{u()}),[u]),(0,r.useEffect)((()=>(g(),()=>{(async()=>{a&&await c.removeProgramAccountChangeListener(a)})()})),[c,g,a]),(0,p.jsx)(r.Fragment,{})},fe="distributor",xe=(0,U.createAsyncThunk)("distributor/initDistributors",(async e=>e)),be=(0,U.createAsyncThunk)("distributor/upsetDistributor",(async e=>{let{address:A,data:t}=e;if(!s.util.isAddress(A))throw new Error("Invalid farm address");if(!t)throw new Error("Data is empty");return{[A]:t}})),Qe=((0,U.createAsyncThunk)("distributor/getFarm",(async(e,A)=>{let{address:t}=e,{getState:r}=A;const{farms:{[t]:i}}=r();return{[t]:i}})),(0,U.createSlice)({name:fe,initialState:{},reducers:{},extraReducers:e=>{e.addCase(xe.fulfilled,((e,A)=>{let{payload:t}=A;Object.assign(e,t)})).addCase(be.fulfilled,((e,A)=>{let{payload:t}=A;Object.assign(e,t)}))}}).reducer),je=[],ve=()=>{const e=(0,i.useDispatch)(),A=Y(),t=(0,r.useCallback)((A=>e(xe(A))),[e]),s=(0,r.useCallback)(((A,t)=>e(be({address:A,data:t}))),[e]);return(0,p.jsx)(Ce,{program:A.program,name:"distributor",filter:je,init:t,upset:s})},Se=e=>{let{children:A}=e;const[t]=we(),i=(0,r.useMemo)((()=>!Object.values(t).length||Object.values(t).includes(!0)),[t]);return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(ve,{}),i?null:A]})};var Me=t(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const Pe={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const A=Object.getPrototypeOf(e);return null!==A&&null===Object.getPrototypeOf(A)})(e)||"bigint"===typeof e||e instanceof I.rV.PublicKey||e instanceof I.BN||Me.isBuffer(e)}},Re=(0,U.configureStore)({middleware:e=>e(Pe),devTools:!1,reducer:{main:oe,recipients:J,distributors:Qe}});var Ke=t(45597);const{manifest:{appId:ke}}=u,Te=(0,r.memo)((()=>(0,p.jsx)(i.Provider,{store:Re,children:(0,p.jsx)(Se,{children:(0,p.jsx)(Ie,{children:(0,p.jsx)(ye,{})})})}))),De=()=>{const e=(0,s.useSetBackground)();return(0,r.useEffect)((()=>{e({light:"#1D2127",dark:"#1D2127"})}),[e]),(0,p.jsx)(Te,{})},Ge=()=>(0,p.jsx)(s.AntdProvider,{appId:ke,prefixCls:ke,children:(0,p.jsx)(De,{})})},83272:(e,A,t)=>{"use strict";e.exports=t.p+"static/media/README.ff93448fef94ea73029b.md"},69363:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAhCAYAAAC803lsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMSSURBVHgBtZixbhNBEIb/vbNJA04gCiDhiFCABEZIdIQC0YB4gYQaBR4gRLTYqVF4AuABIBIlhArRINFAkbiObIciEWBZFNg+7/LP5myfja3c7ZlfOu/pvN75dmd29sYKY/SrhNta4QJvTxmDGaSQUqiz+ekZfD1ZwreRfUYBGIXLBtjXBp8xQXkKizR4SRm8GwYaAPmxjlU2lUkDjAJiMzNbxMt/QAjxwAQoGx9VOGrqGHLNFhpx+qoO5pWPwmwJryycfNAdCzCYTgPBgZbjQojEFt1/3NpGCKKBFV6v4SiBYEBeQUIRZDNQuBOOwQcK+3CU8jDPAde4szbhIE7gjAWRpWGgfIerNDYZfIYrug0HcQftCYOsyAIcxbywzknkefse7pK4mvHgKIkL7rmHcu/qlq4CV5AwLtbtvULV1S1RJQaRXCFxQZfkwkdp3OIO0m5iLYwLq7RucQPReNSNC9Gk3CLKxO0occHmcfQZ40RmIitSJaBcNT6stgPU/IRZOhaIxEWrNRAXXRKBk6vA7yodjTJXbTqbQY4wSAITC6Td6uWLBme9zdO5RoNlz0eFBsticCqLnGkTKoMCAQtZH/fY/ybdZzoGN1KD2FXQeJH1UGwSRAy2Q4PMios0eJ/dCoQ9DGAz8POGDnAXPo7UkSAct2E87DRxeHRzBeRdIq815pna85xxjjsnP+bnxbgneuxgtVBydOv+wDoye19hi0BXI903kpzozik+KptpIxDhtn6eYIgJgWjrrj5EgCUk1ERAGNHL/dv4cTFREJvoTG9FNgKDLTgoPUjXLQo7SeNiGGQXaaTs+2qVFcAKHMWtW/dY6Owy4s/BQV23cBevulYAYluKLesafpyFg0K3bKQpyGj7T9gCHeBDWH0lJGGGTRMXGgWejV96IHMlfGSzYN++Eohx8QaOsm71ce10WAMP1L4HT/FEZfApmsb/h8JMfGuuiGe9Z8OdWAOvMABPpKn8xklWnCf3Esff69a8Y0FEUvB0FK6zbrlIoN/033mkkfw/YtBhRXnAMd9yl9SHu/wFvSQRM8TffngAAAAASUVORK5CYII="},70854:(e,A,t)=>{"use strict";e.exports=t.p+"static/media/panel.6ce7bc345912340df001.png"},7420:()=>{},95856:()=>{},46601:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx.ee09fc6c.chunk.js.map