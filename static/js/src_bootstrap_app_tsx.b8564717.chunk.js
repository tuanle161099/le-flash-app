(globalThis.webpackChunkle_flash=globalThis.webpackChunkle_flash||[]).push([["src_bootstrap_app_tsx"],{45597:(e,t,r)=>{"use strict";Object.defineProperty(t,"X$",{value:!0}),Object.defineProperty(t,"jY",{enumerable:!0,get:function(){return s.default}}),t.h0=void 0,Object.defineProperty(t,"ng",{enumerable:!0,get:function(){return i.default}});var A=n(r(70854)),s=n(r(69363)),i=n(r(83272));function n(e){return e&&e.__esModule?e:{default:e}}const a=[A.default];t.h0=a},80661:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Background:()=>Pt,Layout:()=>Tt,Page:()=>kt,__esModule:()=>St.X$,logo:()=>St.jY,panels:()=>St.h0,readme:()=>St.ng});var A=r(92950),s=r(55754),i=r(49471),n=r(45055),a=r(32671),o=r(69716);const d={appId:"le_flash",url:"https://descartesnetwork.github.io/senhub/index.js"},l={devnet:{node:"https://api.devnet.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"},testnet:{node:"https://api.testnet.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"},mainnet:{node:"https://api.mainnet-beta.solana.com",leFlashId:"3E8eFwLQhHgtzqAnestzG7SeZUWYH7BZLf8m9EGa8wJH"}},c={development:{senApiUpload:"https://api.sentre.io/storage/upload",aws:"https://sen-storage.s3.us-west-2.amazonaws.com/"},production:{senApiUpload:"https://api.sentre.io/storage/upload",aws:"https://sen-storage.s3.us-west-2.amazonaws.com/"}},u={manifest:{development:{...d},production:{...d}}[i.env],sol:l[i.net],api:c[i.env]},{manifest:{appId:p}}=u;var g=r(69363),m=r(45263);const h=[{label:"Dashboard",key:"dashboard",icon:(0,m.jsx)(o.Z,{name:"images-outline"})},{label:"Airdrop",key:"airdrop",icon:(0,m.jsx)(o.Z,{name:"airplane-outline"})}],y=()=>{const[e,t]=(0,A.useState)("dashboard"),{pathname:r}=(0,n.useLocation)(),{appRoute:s,pushHistory:i}=(()=>{const e=(0,n.useLocation)(),t=(0,n.useHistory)(),r=(0,A.useMemo)((()=>new URLSearchParams(e.search)),[e.search]),s=(0,A.useCallback)((e=>r.get(e)),[r]),i=(0,A.useCallback)((e=>{const t=new URLSearchParams;for(const r in e)t.set(r,e[r]);return t.toString()}),[]),a=(0,A.useMemo)((()=>`/app/${p}`),[]);return{getQuery:s,generateQuery:i,pushHistory:(0,A.useCallback)((e=>t.push(`${a}${e}`)),[a,t]),appRoute:a}})(),o=(0,A.useCallback)((()=>{const e=r.replace(`${s}/`,""),A=e.indexOf("/");return t(-1===A?e:e.slice(0,A))}),[s,r]);return(0,A.useEffect)((()=>{o()}),[o]),(0,m.jsxs)(a.Row,{className:"header",align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Menu,{selectedKeys:[e],items:h,mode:"horizontal",onSelect:async e=>i("/"+e.key)})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(a.Avatar,{shape:"square",src:g,size:32})})]})};var x=r(50794),f=r(67096);const w=()=>(0,A.useMemo)((()=>new f.I(i.connection)),[]),C=()=>{const[e,t]=(0,A.useState)([]),r=w(),s=(0,i.useWalletAddress)(),n=(0,A.useCallback)((async()=>{const e=await r.nfts().findAllByOwner({owner:new x.rV.PublicKey(s)});return t(e)}),[s,r]);return(0,A.useEffect)((()=>{n()}),[n]),e},I=e=>{const t=C(),r=(0,A.useMemo)((()=>{const r=[];for(const A of t)A.collection&&A.collection.address.toBase58()===e&&r.push(A);return r}),[e,t]);return r},E=e=>{const[t,r]=(0,A.useState)(!1),[s,i]=(0,A.useState)(),n=w(),a=(0,A.useCallback)((async()=>{if(e)try{r(!0);const t=await n.nfts().findByMint({mintAddress:new x.rV.PublicKey(e)});return i(t)}catch(t){console.log(t)}finally{r(!1)}}),[n,e]);return(0,A.useEffect)((()=>{a()}),[a]),{nftData:s,loading:t}},B=e=>{let{label:t,value:r,icon:A}=e;return(0,m.jsx)(a.Card,{style:{borderRadius:16},bodyStyle:{padding:"20px 24px"},children:(0,m.jsxs)(a.Space,{style:{width:"100%"},direction:"vertical",children:[(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Text,{type:"success",children:t})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(o.Z,{name:A,style:{fontSize:18}})})]}),(0,m.jsx)(a.Typography.Title,{level:4,children:r})]})})},j=()=>{const e=(0,s.useSelector)((e=>{let{receipts:t}=e;return t})),t=C();return(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{xs:24,sm:12,md:8,children:(0,m.jsx)(B,{label:"Total balance NFT",value:t.length,icon:"cash-outline"})}),(0,m.jsx)(a.Col,{xs:24,sm:12,md:8,children:(0,m.jsx)(B,{label:"Total NFT received",value:Object.keys(e).length,icon:"image-outline"})}),(0,m.jsx)(a.Col,{xs:24,sm:12,md:8,children:(0,m.jsx)(B,{label:"Total wallet airdrops",value:1,icon:"wallet-outline"})})]})};var b=r(4550),v=r.n(b),Q=r(51518),S=r.n(Q);const M=e=>{let{address:t}=e;const[r,s]=(0,A.useState)(!1);return(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Typography.Text,{type:"secondary",className:"caption",children:i.util.shortenAddress(t,3)}),(0,m.jsx)(a.Tooltip,{title:"Copied",open:r,children:(0,m.jsx)(S(),{text:t,onCopy:async()=>{s(!0),await i.util.asyncWait(1500),s(!1)},children:(0,m.jsx)(a.Typography.Text,{style:{cursor:"pointer"},className:"caption",children:(0,m.jsx)(o.Z,{name:"copy-outline"})})})})]})},T=e=>{var t,r;let{mintAddress:A}=e;const{nftData:s,loading:i}=E(A);return(0,m.jsx)(a.Spin,{spinning:i,children:(0,m.jsxs)(a.Space,{size:12,children:[(0,m.jsx)(a.Avatar,{size:32,src:null===s||void 0===s||null===(t=s.json)||void 0===t?void 0:t.image}),(0,m.jsxs)(a.Space,{size:0,direction:"vertical",children:[(0,m.jsx)(a.Typography.Text,{children:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s||null===(r=s.json)||void 0===r?void 0:r.name)}),(0,m.jsx)(M,{address:A})]})]})})},P=e=>{let{chequeAddress:t,distributorAddress:r}=e;const i=(0,s.useSelector)((e=>{let{cheques:t}=e;return t})),n=(0,s.useSelector)((e=>{let{receipts:t}=e;return t})),a=(0,A.useMemo)((()=>{let e="";if(e=Object.keys(n).find((e=>n[e].distributor.toBase58()===r)),e)return n[e].mintAddress.toBase58();if(e=Object.keys(i).find((e=>e===t)),!e)return"";return i[e].mint.toBase58()}),[t,i,r,n]);return(0,m.jsx)(T,{mintAddress:a})},k="MMM DD, YYYY HH:mm";let D;!function(e){e.waiting="Waiting",e.ready="Ready",e.claimed="Claimed",e.expired="Expired",e.loading="Loading"}(D||(D={}));const R={Waiting:"#D4B106",Ready:"#03A326",Claimed:"#40A9FF",Expired:"#F9575E",Loading:"#F4F5F5"},K=e=>{let{state:t}=e;const r=(0,A.useMemo)((()=>t?R[t]:R[D.loading]),[t]);return(0,m.jsx)(a.Tag,{style:{margin:0,borderRadius:4,border:`solid 1px ${r}`,textTransform:"capitalize",background:"transparent",color:r},children:t||D.loading})},N=e=>(0,s.useSelector)((t=>{let{distributors:r}=t;return r[e]})),G=e=>{const t=N(e),r=(0,s.useSelector)((e=>{let{receipts:t}=e;return t})),i=(0,A.useMemo)((()=>{const{startedAt:A}=t,s=1e3*A.toNumber(),i=Date.now(),n=Object.keys(r).find((t=>r[t].distributor.toBase58()===e));return n?D.claimed:s>i?D.waiting:D.ready}),[e,t,r]);return i},q=e=>{let{distributorAddress:t}=e;const r=G(t);return(0,m.jsx)(K,{state:r})};var O=r(17604),Y=r(7867),V=r(21995),z=r.n(V),L=r(97429).Buffer;const H=L.from("00","hex"),F=e=>{const t=(e=>{const t=Y.bs58.decode(e);let r=L.from(t.subarray(28,32)).toString("utf8");for(;r[0]===H.toString("utf8");)r=r.substring(1);return r})(e),r=L.from(Y.bs58.decode(e).subarray(0,28));return`${Y.bs58.encode(r)}.${t}`};var U=r(97429).Buffer;const W=e=>{const[t,r]=(0,A.useState)(),s=X(),i=(0,A.useCallback)((async()=>{const t=await s(e);return r(t)}),[e,s]);return(0,A.useEffect)((()=>{i()}),[i]),t},X=()=>{const e=(0,s.useSelector)((e=>{let{distributors:t}=e;return t}));return(0,A.useCallback)((async t=>{const r=e[t],{metadata:A}=r,s=Y.bs58.encode(U.from(A)),i=F(s),n=u.api.aws+i,{data:a}=await z().get(n);return a.data}),[e])},Z=(Y.bs58.encode(x.Wr.accountDiscriminator("distributor")),Y.bs58.encode(x.Wr.accountDiscriminator("receipt")),{version:"0.1.0",name:"le_flash",instructions:[{name:"initializePool",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!0},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"mint",type:"publicKey"},{name:"treasury",type:"publicKey"}]},{name:"deposit",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!0},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"srcAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"recipient",type:"publicKey"}]},{name:"withdraw",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"dstAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"amountOut",type:"u64"}]},{name:"withdrawNft",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"pool",isMut:!0,isSigner:!1},{name:"cheque",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"mintLpt",isMut:!0,isSigner:!1},{name:"associatedTokenAccountLpt",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"metadata",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"dstAssociatedTokenAccount",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"closeCheque",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"cheque",isMut:!0,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1}],args:[]},{name:"initializeDistributor",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!0},{name:"src",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"feeCollector",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"merkleRoot",type:{array:["u8",32]}},{name:"total",type:"u64"},{name:"endedAt",type:"i64"},{name:"startedAt",type:"i64"},{name:"metadata",type:{array:["u8",32]}},{name:"fee",type:"u64"}]},{name:"claim",accounts:[{name:"authority",isMut:!0,isSigner:!0},{name:"distributor",isMut:!0,isSigner:!1},{name:"receipt",isMut:!0,isSigner:!1},{name:"dst",isMut:!0,isSigner:!1},{name:"treasurer",isMut:!1,isSigner:!1},{name:"treasury",isMut:!0,isSigner:!1},{name:"feeCollector",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"associatedTokenProgram",isMut:!1,isSigner:!1},{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"proof",type:{vec:{array:["u8",32]}}},{name:"amount",type:"u64"},{name:"startedAt",type:"i64"},{name:"salt",type:{array:["u8",32]}},{name:"fee",type:"u64"},{name:"recipient",type:"publicKey"},{name:"mint",type:"publicKey"}]}],accounts:[{name:"cheque",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"amount",type:"u64"}]}},{name:"distributor",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"merkleRoot",type:{array:["u8",32]}},{name:"total",type:"u64"},{name:"claimed",type:"u64"},{name:"endedAt",type:"i64"},{name:"startedAt",type:"i64"},{name:"metadata",type:{array:["u8",32]}}]}},{name:"pool",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"pool",type:"publicKey"},{name:"mint",type:"publicKey"},{name:"treasury",type:"publicKey"},{name:"mintLpt",type:"publicKey"}]}},{name:"receipt",type:{kind:"struct",fields:[{name:"authority",type:"publicKey"},{name:"distributor",type:"publicKey"},{name:"recipient",type:"publicKey"},{name:"startedAt",type:"i64"},{name:"claimedAt",type:"i64"},{name:"salt",type:{array:["u8",32]}},{name:"mintAddress",type:"publicKey"}]}}],events:[{name:"CloseChequeEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1}]},{name:"DepositEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1},{name:"amountIn",type:"u64",index:!1},{name:"lptPrintAmount",type:"u64",index:!1}]},{name:"InitializePoolEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"treasury",type:"publicKey",index:!1}]},{name:"ClaimEvent",fields:[{name:"destination",type:"publicKey",index:!1},{name:"recipient",type:"publicKey",index:!1},{name:"startedAt",type:"i64",index:!1},{name:"claimedAt",type:"i64",index:!1},{name:"claimed",type:"u64",index:!1}]},{name:"InitializeDistributorEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"distributor",type:"publicKey",index:!1},{name:"merkleRoot",type:{array:["u8",32]},index:!1},{name:"total",type:"u64",index:!1},{name:"endedAt",type:"i64",index:!1},{name:"metadata",type:{array:["u8",32]},index:!1}]},{name:"RevokeEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"distributor",type:"publicKey",index:!1},{name:"remaining",type:"u64",index:!1}]},{name:"WithdrawNFTEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"cheque",type:"publicKey",index:!1}]},{name:"WithdrawEvent",fields:[{name:"authority",type:"publicKey",index:!1},{name:"pool",type:"publicKey",index:!1},{name:"mint",type:"publicKey",index:!1},{name:"amountOut",type:"u64",index:!1},{name:"amountLpt",type:"u64",index:!1}]}],errors:[{code:6e3,name:"InvalidNftCollection",msg:"Invalid NFT collection"},{code:6001,name:"NotWithDraw",msg:"NFT has not been retrieved"},{code:6002,name:"Overflow",msg:"Operation overflowed"},{code:6003,name:"InvalidMerkleProof",msg:"Invalid merkle proof"},{code:6004,name:"InvalidCurrentDate",msg:"Cannot get current date"},{code:6005,name:"EndedCampaign",msg:"The campaign has been ended"},{code:6006,name:"NotStartedCampaign",msg:"The campaign is not started yet"},{code:6007,name:"NotEndedCampaign",msg:"The campaign is not ended yet"},{code:6008,name:"NoBump",msg:"Cannot derive the program address"}]}),_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new x.rV.Keypair).publicKey.toBase58();return{fee:new x.BN(0),feeCollectorAddress:e}};r(71256);var J=r(38073),$=r(97429).Buffer;const ee=e=>{if(!e)return!1;try{if(!new x.rV.PublicKey(e))throw new Error("Invalid public key");return!0}catch(t){return!1}},te=async e=>await J.O2.metadata.Metadata.getPDA(new x.rV.PublicKey(e)),re=async(e,t,r,A)=>{const[s]=await x.rV.PublicKey.findProgramAddress([$.from("receipt"),e,t.toBuffer(),r.toBuffer()],A);return s};var Ae=r(59186),se=r(97429).Buffer;const ie={rent:x.rV.SYSVAR_RENT_PUBKEY,systemProgram:x.rV.SystemProgram.programId,associatedTokenProgram:x.P6.token.ASSOCIATED_PROGRAM_ID,tokenProgram:Ae.H_};const ne=class{constructor(e,t){var r=this;if(this._provider=void 0,this.program=void 0,this.deriveTreasurerAddress=async e=>{if("string"!==typeof e&&(e=e.toBase58()),!ee(e))throw new Error("Invalid pool address");const t=new x.rV.PublicKey(e),[r]=await x.rV.PublicKey.findProgramAddress([se.from("treasurer"),t.toBuffer()],this.program.programId);return r.toBase58()},this.deriveChequeAddress=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!ee(e))throw new Error("Invalid proposal address");const A=new x.rV.PublicKey(e),s=r._provider.wallet.publicKey,[i]=await await x.rV.PublicKey.findProgramAddress([se.from("cheque"),A.toBuffer(),s.toBuffer()],r.program.programId),n=i.toBase58();if(t){let t,A;try{const{authority:e,pool:s}=await r.getChequeData(n);t=e.toBase58(),A=s.toBase58()}catch(a){throw new Error(`This cheque ${n} is not initialized yet`)}if(r._provider.wallet.publicKey.toBase58()!==t)throw new Error("Violated authority address");if(e!==A)throw new Error("Violated proposal address")}return n},this.getPoolData=async e=>this.program.account.pool.fetch(e),this.getChequeData=async e=>this.program.account.cheque.fetch(e),this.fetchCheques=async()=>this.program.account.cheque.all(),this.initializePool=async e=>{let{pool:t=x.rV.Keypair.generate(),mintLpt:r=x.rV.Keypair.generate(),sendAndConfirm:A=!0,mint:s}=e;const i=t,n=i.publicKey.toBase58(),a=await this.deriveTreasurerAddress(n),o=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(r.publicKey),owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),d=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(a)}),l=await this.program.methods.initializePool(s,d).accounts({associatedTokenAccountLpt:o,authority:this._provider.wallet.publicKey,mintLpt:r.publicKey,pool:n,treasurer:a,...ie}).transaction();let c="";return A&&(this._provider.opts.skipPreflight=!0,c=await this._provider.sendAndConfirm(l,[i,r])),{txId:c,poolAddress:i.publicKey.toBase58(),tx:l}},this.deposit=async e=>{let{recipient:t=this._provider.wallet.publicKey.toBase58(),poolAddress:r,sendAndConfirm:A=!0,mintNFTAddress:s,chequeKeypair:i=x.rV.Keypair.generate()}=e;const n=new x.rV.PublicKey(t),{mintLpt:a}=await this.getPoolData(r),o=await this.deriveTreasurerAddress(r),d=(await te(new x.rV.PublicKey(s))).toBase58(),l=await x.P6.token.associatedAddress({mint:a,owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),c=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),u=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(o)}),p=i.publicKey.toBase58();let g=await this.program.methods.deposit(n).accounts({authority:this._provider.wallet.publicKey,pool:r,associatedTokenAccountLpt:l,mint:s,mintLpt:a,srcAssociatedTokenAccount:c,treasurer:o,treasury:u,cheque:p,metadata:d,...ie}).transaction(),m="";return A&&(this._provider.opts.skipPreflight=!0,m=await this._provider.sendAndConfirm(g,[i])),{txId:m,tx:g,chequeAddress:i.publicKey.toBase58()}},this.withdrawNFT=async e=>{let{chequeAddress:t,sendAndConfirm:r=!0}=e;const{pool:A,mint:s}=await this.getChequeData(t),{mintLpt:i}=await this.getPoolData(A),n=await this.deriveTreasurerAddress(A),a=(await te(new x.rV.PublicKey(s))).toBase58(),o=await x.P6.token.associatedAddress({mint:i,owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),d=await x.P6.token.associatedAddress({mint:s,owner:new x.rV.PublicKey(this._provider.wallet.publicKey)}),l=await x.P6.token.associatedAddress({mint:new x.rV.PublicKey(s),owner:new x.rV.PublicKey(n)});let c=await this.program.methods.withdrawNft().accounts({authority:this._provider.wallet.publicKey,pool:A,associatedTokenAccountLpt:o,mint:s,mintLpt:i,dstAssociatedTokenAccount:d,treasurer:n,treasury:l,metadata:a,cheque:t,...ie}).transaction(),u="";return r&&(u=await this._provider.sendAndConfirm(c,[])),{txId:u,tx:c}},this.closeCheque=async e=>{let{chequeAddress:t,sendAndConfirm:r=!0}=e;const A=new x.rV.PublicKey(t),s=await this.program.methods.closeCheque().accounts({authority:this._provider.wallet.publicKey,cheque:A,...ie}).transaction();let i="";return console.log(s,"tx"),r&&(i=await this._provider.sendAndConfirm(s,[])),{txId:i,tx:s}},this.parseDistributorData=e=>this.program.coder.accounts.decode("distributor",e),this.getDistributorData=async e=>this.program.account.distributor.fetch(e),this.parseReceiptData=e=>this.program.coder.accounts.decode("receipt",e),this.getReceiptData=async e=>this.program.account.receipt.fetch(e),this.deriveReceiptAddress=async function(e,t){let A=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(32!==e.length)throw new Error("The salt must has length 32");if(!ee(t))throw new Error("Invalid distributor address");const s=await re(e,new x.rV.PublicKey(t),r._provider.wallet.publicKey,r.program.programId),i=s.toBase58();if(A){let A,s,a;try{const{authority:e,distributor:t,salt:n}=await r.getReceiptData(i);A=e.toBase58(),s=t.toBase58(),a=se.from(n)}catch(n){throw new Error(`This receipt ${i} is not initialized yet`)}if(r._provider.wallet.publicKey.toBase58()!==A)throw new Error("Violated authority address");if(t!==s)throw new Error("Violated proposal address");if(0!==e.compare(a))throw new Error("Violated salt")}return i},this.deriveDistributorTreasurerAddress=async e=>{if(!ee(e))throw new Error("Invalid distributor address");const t=new x.rV.PublicKey(e),[r]=await x.rV.PublicKey.findProgramAddress([se.from("treasurer"),t.toBuffer()],this.program.programId);return r.toBase58()},this.initializeDistributor=async e=>{let{tokenAddress:t,total:r,merkleRoot:A,metadata:s,startedAt:i=0,endedAt:n=0,distributor:a=x.rV.Keypair.generate(),feeOptions:o=_(this._provider.wallet.publicKey.toBase58()),sendAndConfirm:d=!0}=e;const{fee:l,feeCollectorAddress:c}=o;if(!ee(c))throw new Error("Invalid fee collector address");if(!ee(t))throw new Error("Invalid token address");if(!(u=A)||32!==u.length)throw new Error("Invalid merkle root");var u;if(r.isNeg())throw new Error("The total must not be negative");if(32!==s.length)throw new Error("Invalid metadata path");const p=a.publicKey.toBase58(),g=new x.rV.PublicKey(t),m=await x.P6.token.associatedAddress({mint:g,owner:this._provider.wallet.publicKey}),h=await this.deriveDistributorTreasurerAddress(p),y=new x.rV.PublicKey(h),f=await x.P6.token.associatedAddress({mint:g,owner:y}),w=await this.program.methods.initializeDistributor([...A],r,new x.BN(n),new x.BN(i),[...s],l).accounts({authority:this._provider.wallet.publicKey,distributor:a.publicKey,src:m,treasurer:y,treasury:f,feeCollector:new x.rV.PublicKey(c),mint:g,tokenProgram:x.P6.token.TOKEN_PROGRAM_ID,associatedTokenProgram:x.P6.token.ASSOCIATED_PROGRAM_ID,systemProgram:x.rV.SystemProgram.programId,rent:x.rV.SYSVAR_RENT_PUBKEY}).signers([a]);return{tx:await w.transaction(),txId:d?await w.rpc({commitment:"confirmed"}):"",distributorAddress:p}},this.claim=async e=>{let{distributorAddress:t,proof:r,data:A,feeOptions:s=_(this._provider.wallet.publicKey.toBase58()),sendAndConfirm:i=!0,mintAddress:n}=e;const{fee:a,feeCollectorAddress:o}=s;if(!ee(o))throw new Error("Invalid fee collector address");if(!ee(t))throw new Error("Invalid distributor address");if(!this._provider.wallet.publicKey.equals(A.authority))throw new Error("Invalid athority address");const d=new x.rV.PublicKey(n),{mint:l}=await this.getDistributorData(t),c=await this.deriveReceiptAddress(A.salt,t),u=await x.P6.token.associatedAddress({mint:l,owner:this._provider.wallet.publicKey}),p=await this.deriveDistributorTreasurerAddress(t),g=new x.rV.PublicKey(p),m=await x.P6.token.associatedAddress({mint:l,owner:g}),h=await this.program.methods.claim(r.map((e=>e.toJSON().data)),new x.BN(1),A.startedAt,A.salt.toJSON().data,a,A.chequeAddress,d).accounts({authority:this._provider.wallet.publicKey,distributor:new x.rV.PublicKey(t),receipt:new x.rV.PublicKey(c),dst:u,treasurer:g,treasury:m,feeCollector:new x.rV.PublicKey(o),mint:l,tokenProgram:x.P6.token.TOKEN_PROGRAM_ID,associatedTokenProgram:x.P6.token.ASSOCIATED_PROGRAM_ID,systemProgram:x.rV.SystemProgram.programId,rent:x.rV.SYSVAR_RENT_PUBKEY});return{tx:await h.transaction(),txId:i?await h.rpc({commitment:"confirmed"}):"",dstAddress:u.toBase58()}},!ee(t))throw new Error("Invalid program id");this._provider=e,this.program=new x.$r(Z,t,this._provider)}};var ae=r(16348),oe=r(97429).Buffer;const de=104;class le{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.receipients=void 0,this.leafs=void 0,this.getTotal=()=>new x.BN(this.receipients.length),this.toBuffer=()=>oe.concat(this.receipients.map(le.serialize)),this.getLeaf=e=>{const t=le.serialize(e);return oe.from(ae.keccak_256.digest(t))},this.getParent=(e,t)=>{if(!e||!t)throw new Error("Invalid child");const r=oe.concat(le.sort(e,t));return oe.from(ae.keccak_256.digest(r))},this.getSibling=(e,t)=>{const r=t.findIndex((t=>0===t.compare(e)));if(-1===r)throw new Error("Invalid child");return r%2===1?t[r-1]:t[r+1]},this.nextLayer=e=>{const t=[...e];if(0===t.length)throw new Error("Invalid tree");if(1===t.length)return t;const r=t.length%2===1?t.pop():void 0,A=[];for(let s=0;s<t.length;s+=2)A.push(this.getParent(t[s],t[s+1]));return r?[...A,r]:A},this.deriveMerkleRoot=()=>{let e=this.leafs;for(;e.length>1;)e=this.nextLayer(e);return e[0]},this.deriveProof=e=>{let t=this.getLeaf(e);const r=[];let A=this.leafs;for(;A.length>1;){const e=this.getSibling(t,A);e&&(t=this.getParent(t,e),r.push(e)),A=this.nextLayer(A)}return r},this.verifyProof=(e,t)=>{let r=this.getLeaf(t);for(const A of e)r=this.getParent(r,A);return 0===this.deriveMerkleRoot().compare(r)},this.receipients=e,this.leafs=le.sort(...this.receipients.map((e=>this.getLeaf(e))))}}le.sort=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return[...t].sort(((e,t)=>{const r=oe.compare(e,t);if(0===r)throw new Error("The receipients has a duplication");return r}))},le.serialize=e=>{let{authority:t,chequeAddress:r,startedAt:A,salt:s}=e;return oe.concat([t.toBuffer(),r.toBuffer(),A.toArrayLike(oe,"le",8),s])},le.deserialize=e=>{if(e.length!==de)throw new Error("Invalid buffer");return{authority:new x.rV.PublicKey(e.subarray(0,32)),chequeAddress:new x.rV.PublicKey(e.subarray(32,64)),startedAt:new x.BN(e.subarray(64,72),"le"),salt:oe.from(e.subarray(72,104))}},le.salt=e=>{let t="";for(;t.length<128;)t+=Math.round(10*Math.random()).toString();const r=e||t;return oe.from(ae.keccak_256.digest(r))},le.fromBuffer=e=>{if(e.length%de!==0)throw new Error("Invalid buffer");let t=[];for(let r=0;r<e.length;r+=de)t.push(le.deserialize(e.subarray(r,r+de)));return new le(t)};var ce=r(4065);const ue=()=>{const e=(0,i.useWalletAddress)();return(0,A.useMemo)((()=>{const t=(0,ce.getAnchorProvider)(i.rpc,e,window.sentre.solana);return new ne(t,u.sol.leFlashId)}),[e])};var pe=r(97429).Buffer;const ge=e=>{let{distributorAddress:t}=e;const r=G(t),{loading:n,onClaim:o}=(()=>{const e=(0,s.useSelector)((e=>{let{cheques:t}=e;return t})),t=X(),r=(0,i.useWalletAddress)(),[n,a]=(0,A.useState)(!1),o=ue();return{onClaim:(0,A.useCallback)((async A=>{try{a(!0);const{data:s}=await t(A),i=le.fromBuffer(pe.from(s));let n=null;for(const e of i.receipients)r===e.authority.toBase58()&&(n=e);if(!n)throw new Error("You not in list!");const d=i.deriveProof(n);if(!i.verifyProof(d,n))throw new Error("Invalid proof");const l=n.chequeAddress.toBase58(),{mint:c}=e[l],u=new x.rV.Transaction,{tx:p,txId:g}=await o.claim({distributorAddress:A,data:n,proof:d,sendAndConfirm:!1,mintAddress:c.toBase58()});u.add(p);const{tx:m}=await window.leFlash.withdrawNFT({chequeAddress:l,sendAndConfirm:!1});u.add(m);const{tx:h}=await window.leFlash.closeCheque({chequeAddress:l,sendAndConfirm:!1});u.add(h),await o._provider.sendAndConfirm(u),(0,O.t5)("Claimed NFT successfully!",g)}catch(s){(0,O.cB)(s)}finally{a(!1)}}),[e,t,o,r]),loading:n}})();return(0,m.jsx)(a.Button,{onClick:()=>o(t),type:"text",loading:n,disabled:r===D.claimed,style:{color:r===D.claimed?"":"#ED8000"},children:"CLAIM"})},me=[{title:"UNLOCK DATE",dataIndex:"unlockDate",render:e=>(0,m.jsx)(a.Typography.Text,{children:e?v()(e).format(k):"Immediately"})},{title:"EXPIRATION DATE",dataIndex:"expirationDate",render:e=>(0,m.jsx)(a.Typography.Text,{children:e?v()(e).format(k):"Unlimited"})},{title:"SENDER",dataIndex:"sender",render:e=>(0,m.jsx)(a.Typography.Text,{type:"success",underline:!0,onClick:()=>window.open(i.util.explorer(e),"_blank"),style:{cursor:"pointer"},children:i.util.shortenAddress(e)})},{title:"NFT",dataIndex:"chequeAddress",render:(e,t)=>{let{distributorAddress:r}=t;return(0,m.jsx)(P,{chequeAddress:e,distributorAddress:r})}},{title:"STATUS",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(q,{distributorAddress:e})},{title:"ACTION",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(ge,{distributorAddress:e})}];var he=r(97429).Buffer;const ye=()=>{const[e,t]=(0,A.useState)([]),r=(0,s.useSelector)((e=>{let{distributors:t}=e;return t})),n=(0,i.useWalletAddress)(),o=X(),d=(0,A.useCallback)((async()=>{const e=[];for(const t in r){const{endedAt:A,authority:s}=r[t],{data:i}=await o(t),a=le.fromBuffer(he.from(i)).receipients;for(const r of a)if(n===r.authority.toBase58()){e.push({distributorAddress:t,chequeAddress:r.chequeAddress.toBase58(),expirationDate:1e3*A.toNumber(),sender:s.toBase58(),unlockDate:1e3*r.startedAt.toNumber()});break}}return e.sort(((e,t)=>e.unlockDate?t.unlockDate-e.unlockDate:0)),t(e)}),[r,o,n]);return(0,A.useEffect)((()=>{d()}),[d]),(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Airdrop Receive"})}),(0,m.jsx)(a.Col,{children:"Filter"}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Table,{columns:me,dataSource:e,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})})]})})},xe=()=>(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:3,children:"Dashboard"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(j,{})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ye,{})}),(0,m.jsx)(a.Col,{span:24})]}),fe=()=>{const e=(0,s.useSelector)((e=>{let{pools:t}=e;return t})),[t,r]=(0,A.useState)(!1),i=(0,A.useCallback)((async e=>{const t=new FormData;t.append("file",e);const{data:r}=await z().post(u.api.senApiUpload,t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});return r.cid}),[]),n=ue(),a=(0,A.useCallback)((async(t,A)=>{try{r(!0);let s=[],a=Object.keys(e).find((t=>e[t].mint.toBase58()===A))||"";if(!a){const{poolAddress:e}=await n.initializePool({mint:new x.rV.PublicKey(A)});a=e}const o=[];for(const{walletAddress:e,mintAddress:r}of t){const t=x.rV.Keypair.generate(),{tx:A,chequeAddress:i}=await n.deposit({recipient:e,mintNFTAddress:r,sendAndConfirm:!1,poolAddress:a,chequeKeypair:t});s.push({tx:A,signers:[t]}),o.push({walletAddress:e,chequeAddress:i,mintAddress:r})}const d=o.map(((e,t)=>{let{chequeAddress:r,walletAddress:A}=e;return{authority:new x.rV.PublicKey(A),chequeAddress:new x.rV.PublicKey(r||""),startedAt:new x.BN(Date.now()/1e3),salt:le.salt(`le-flash/${t.toString()}`)}})),l=new le(d),c=l.toBuffer(),u={checked:!1,createAt:Math.floor(Date.now()/1e3),data:c},p=[new Blob([JSON.stringify({data:u},null,2)],{type:"application/json"})],g=new File(p,"metadata.txt"),m=await i(g),h=Y.bs58.decode(m),{mintLpt:y}=await n.getPoolData(a),f=x.rV.Keypair.generate(),{txId:w,tx:C}=await n.initializeDistributor({tokenAddress:y.toBase58(),total:l.getTotal(),merkleRoot:l.deriveMerkleRoot(),metadata:h,endedAt:0,distributor:f,sendAndConfirm:!1});return s.push({tx:C,signers:[f]}),await n._provider.sendAll(s.map((e=>{let{tx:t,signers:r}=e;return{tx:t,signers:r}}))),(0,O.t5)("Initialize new airdrop successfully!",w)}catch(s){(0,O.cB)(s)}finally{r(!1)}}),[n,e,i]);return{onAirdrop:a,loading:t}};var we=r(19289);const Ce="recipients",Ie=(0,we.createAsyncThunk)(`${Ce}/addRecipient`,(async(e,t)=>{let{newRecipients:r}=e,{getState:A}=t;const{recipients:s}=A();return[...[...s],...r]})),Ee=(0,we.createAsyncThunk)(`${Ce}/removeRecipient`,(async(e,t)=>{let{index:r}=e,{getState:A}=t;const{recipients:s}=A(),i=[...s];return i.splice(r,1),[...i]})),Be=(0,we.createAsyncThunk)(`${Ce}/setRecipient`,(async e=>e)),je=(0,we.createSlice)({name:Ce,initialState:[],reducers:{},extraReducers:e=>{e.addCase(Ie.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(Ee.fulfilled,((e,t)=>{let{payload:r}=t;return r})).addCase(Be.fulfilled,((e,t)=>{let{payload:r}=t;return r}))}}).reducer,be=e=>{var t,r;let{mintAddress:A,onSelect:s,showName:i=!1,size:n}=e;const{nftData:o,loading:d}=E(A);return(0,m.jsx)(a.Spin,{spinning:d,children:(0,m.jsxs)(a.Row,{gutter:[12,12],style:{cursor:"pointer"},children:[(0,m.jsx)(a.Col,{span:24,style:{textAlign:"center",width:n},onClick:()=>s?s(A):null,children:(0,m.jsx)(a.Image,{src:(null===o||void 0===o||null===(t=o.json)||void 0===t?void 0:t.image)||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAyAAAAJYCAYAAACadoJwAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABbySURBVHgB7d2NTht3vsfh2S5NgPDahHIQ6v1fUKW9gQhFUUoxL00INMnJzxzv5nQbz9ie+WKb55GsdovBiFnBfPx/+8evv/7rSwMAADC8Lz80AAAAIQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAA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o6OXpmM9EXW9a/Srrj0A8/EXE2AB9S64dQBPQy24r2stPgAWYwQEYEEVH69fn413vdrdfbFWp6Hzn+2Xawc0ABbnryRAT+oGtd4d39zcHJ8jIURW2/39n+PT77scQAlAd/46AvSoRkMqQupR52pUjGxtPW/++c+N5scfN6wVWVIVGJ8+ff4aHXfNhw8fx9OtnG4OMAwBAjCQuomtx9c30AGA/+OtOAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAIAYAQIAAMQIEAAAIEaAAAAAMQIEAACIESAAAECMAAEAAGIECAAAECNAAACAGAECAADECBAAACBGgAAAADECBAAAiBEgAABAjAABAABiBAgAABAjQAAAgBgBAgAAxAgQAAAgRoAAAAAxAgQAAIgRIAAAQIwAAQAAYgQIAAAQI0AAAICYjQYAAGA2X5r5fPlf5FkMkmAd32wAAAAASUVORK5CYII=",preview:!1,style:{borderRadius:4,aspectRatio:"1",objectFit:"cover"}})}),i&&(0,m.jsx)(a.Col,{span:24,style:{textAlign:"left"},children:(0,m.jsxs)(a.Row,{children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{ellipsis:{tooltip:!0},level:5,children:(null===o||void 0===o?void 0:o.name)||(null===o||void 0===o||null===(r=o.json)||void 0===r?void 0:r.name)})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(M,{address:A})})]})})]})})},ve=e=>{let{mintAddresses:t,onSelect:r=(()=>{})}=e;return(0,m.jsx)(a.Row,{gutter:[8,8],className:"scrollbar",style:{maxHeight:400,overflowY:"hidden"},children:t.map((e=>(0,m.jsx)(a.Col,{onClick:()=>r(e),span:8,children:(0,m.jsx)(be,{mintAddress:e,showName:!0})},e)))})},Qe=e=>{var t,r;let{onMintSelect:i=(()=>{}),mintAddress:n="",disabled:d=!1}=e;const[l,c]=(0,A.useState)(!1),[u,p]=(0,A.useState)(n),g=(0,s.useSelector)((e=>{let{main:t}=e;return t.collection})),h=(0,s.useSelector)((e=>{let{recipients:t}=e;return t})),y=I(g),x=h.map((e=>{let{mintAddress:t}=e;return t})),f=y.map((e=>e.mintAddress.toBase58())).filter((e=>![u,...x].includes(e))),{nftData:w}=E(u);return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(a.Button,{type:"ghost",style:{textAlign:n?"left":"center"},ghost:!0,block:!0,onClick:()=>c(!0),disabled:!g||d,children:n?(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Avatar,{size:24,src:null===w||void 0===w||null===(t=w.json)||void 0===t?void 0:t.image}),(0,m.jsx)(a.Typography.Text,{className:"caption",children:(null===w||void 0===w?void 0:w.name)||(null===w||void 0===w||null===(r=w.json)||void 0===r?void 0:r.name)})]}):(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(o.Z,{name:"chevron-down-outline"}),"Select NFT"]})}),(0,m.jsx)(a.Modal,{open:l,closeIcon:(0,m.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>c(!1),footer:null,style:{paddingBottom:0},children:(0,m.jsxs)(a.Row,{gutter:[0,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Select a NFT"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ve,{onSelect:e=>{p(e),i(e),c(!1)},mintAddresses:f})})]})})]})},Se=e=>{let{mintAddress:t,walletAddress:r,index:i=0}=e;const[n,d]=(0,A.useState)({mintAddress:t,walletAddress:r}),l=(0,s.useDispatch)(),c=(e,t)=>d({...n,[e]:t});return(0,m.jsxs)(a.Row,{gutter:16,children:[(0,m.jsx)(a.Col,{span:14,children:(0,m.jsx)(a.Input,{value:n.walletAddress,placeholder:"Input recipient's address",onChange:e=>c("walletAddress",e.target.value),disabled:!!t})}),(0,m.jsx)(a.Col,{span:8,children:(0,m.jsx)(Qe,{onMintSelect:e=>c("mintAddress",e),mintAddress:n.mintAddress,disabled:!!t})}),(0,m.jsx)(a.Col,{span:2,children:r?(0,m.jsx)(a.Button,{type:"ghost",ghost:!0,icon:(0,m.jsx)(a.Typography.Text,{type:"danger",children:(0,m.jsx)(o.Z,{name:"remove-circle-outline"})}),block:!0,onClick:()=>l(Ee({index:i}))}):(0,m.jsx)(a.Button,{type:"ghost",ghost:!0,icon:(0,m.jsx)(o.Z,{name:"add-circle-outline"}),block:!0,onClick:()=>{if(!n.mintAddress||!n.walletAddress||!n)return;const e={mintAddress:n.mintAddress,walletAddress:n.walletAddress};return d({mintAddress:"",walletAddress:""}),l(Ie({newRecipients:[e]}))}})})]})},Me=()=>{const e=(0,s.useSelector)((e=>e.recipients)),{collection:t}=(0,s.useSelector)((e=>e.main)),r=I(t),{onAirdrop:A,loading:i}=fe(),n=(0,s.useDispatch)(),o=t&&r.length>=e.length;return(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[16,16],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Wallet Address"})}),(0,m.jsx)(a.Button,{disabled:!o,onClick:()=>{if(!o)return;const t=[...e];for(let e=0;e<t.length;e++){const A=t[e];A.mintAddress||(t[e]={...A,mintAddress:r[e].mintAddress.toBase58()})}n(Be(t))},children:"Auto fill"})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Se,{})}),!!e.length&&(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Divider,{style:{margin:0}})}),e.map(((e,t)=>{let{mintAddress:r,walletAddress:A}=e;return(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Se,{mintAddress:r,walletAddress:A,index:t})},r+t)})),(0,m.jsx)(a.Col,{span:24}),(0,m.jsx)(a.Col,{span:24,style:{textAlign:"right"},children:(0,m.jsx)(a.Button,{onClick:()=>A(e,t),type:"primary",loading:i,disabled:!e.length,children:"CONFIRM"})})]})})},Te="main",Pe=(0,we.createAsyncThunk)("main/setCollection",(async e=>({collection:e}))),ke=(0,we.createSlice)({name:Te,initialState:{collection:""},reducers:{},extraReducers:e=>{e.addCase(Pe.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)}))}}).reducer,De=()=>{var e,t;const[r,i]=(0,A.useState)(!1),{collection:n}=(0,s.useSelector)((e=>{let{main:t}=e;return t})),d=(()=>{const e=C(),t=(0,A.useMemo)((()=>{const t=[];for(const{collection:r}of e){if(!r)continue;const e=r.address.toBase58();t.includes(e)||t.push(e)}return t}),[e]);return t})(),l=(0,s.useDispatch)(),{nftData:c}=E(n);return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(a.Button,{type:"ghost",style:{textAlign:c?"left":"center"},size:"large",ghost:!0,onClick:()=>i(!0),block:!0,children:c?(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(a.Avatar,{size:24,src:null===(e=c.json)||void 0===e?void 0:e.image}),(0,m.jsx)(a.Typography.Text,{className:"caption",children:c.name||(null===(t=c.json)||void 0===t?void 0:t.name)})]}):(0,m.jsxs)(a.Space,{children:[(0,m.jsx)(o.Z,{name:"chevron-down-outline"}),"Select collections NFT"]})}),(0,m.jsx)(a.Modal,{open:r,closeIcon:(0,m.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>i(!1),footer:null,style:{paddingBottom:0},children:(0,m.jsxs)(a.Row,{gutter:[0,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:4,children:"Select a collection NFT"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(ve,{onSelect:e=>{l(Pe(e)),i(!1)},mintAddresses:d})})]})})]})};var Re=r(24656),Ke=r.n(Re);const Ne=r.p+"static/media/icon-upload.cc31bf153c9179ce624dd23711edb5ac.svg",Ge=()=>{const[e,t]=(0,A.useState)(!1),[r,i]=(0,A.useState)(),n=(0,s.useDispatch)(),d=async()=>{i(void 0),await n(Be([]))};return(0,m.jsx)(a.Spin,{spinning:e,children:(0,m.jsxs)(a.Row,{gutter:[24,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Upload.Dragger,{accept:".csv,.txt",maxCount:1,className:"upload-file",showUploadList:!1,progress:{strokeWidth:2,showInfo:!0},beforeUpload:async e=>{try{t(!0);const r=await(e=>new Promise(((t,r)=>Ke().parse(e,{skipEmptyLines:!0,complete:(e,r)=>{let{data:A}=e;return i(r),t(A)}}))))(e),A=[];for(const e of r)A.push({mintAddress:"",walletAddress:e});await n(Ie({newRecipients:A}))}catch(r){}finally{t(!1)}},onRemove:d,children:(0,m.jsxs)(a.Space,{direction:"vertical",size:24,align:"center",children:[(0,m.jsx)(a.Image,{src:Ne,preview:!1}),(0,m.jsxs)(a.Space,{direction:"vertical",size:4,align:"center",children:[(0,m.jsx)(a.Typography.Text,{children:"Click or Drop file to upload"}),(0,m.jsxs)(a.Typography.Text,{type:"secondary",children:["The accepted file types are ",(0,m.jsx)("code",{children:".csv"}),","," ",(0,m.jsx)("code",{children:".txt"}),"."]})]})]})})}),r&&(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Card,{bodyStyle:{padding:"8px 24px"},children:(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{type:"success",level:5,children:r.name})}),(0,m.jsx)(a.Col,{children:(0,m.jsx)(a.Button,{onClick:d,type:"text",icon:(0,m.jsx)(o.Z,{name:"trash-outline"})})})]})})})]})})},qe=()=>{const{collection:e}=(0,s.useSelector)((e=>e.main)),t=I(e);return(0,m.jsx)(a.Card,{bordered:!0,children:(0,m.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsxs)(a.Space,{direction:"vertical",children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"Select your collection airdrop"}),(0,m.jsx)(De,{})]})}),(0,m.jsx)(a.Col,{children:(0,m.jsxs)(a.Space,{direction:"vertical",children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"Balance"}),t.length]})})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsxs)(a.Row,{gutter:24,children:[(0,m.jsx)(a.Col,{span:12,children:(0,m.jsxs)(a.Space,{direction:"vertical",style:{width:"100%"},children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"Start time"}),(0,m.jsx)(a.DatePicker,{style:{width:"100%"}})]})}),(0,m.jsx)(a.Col,{span:12,children:(0,m.jsxs)(a.Space,{direction:"vertical",style:{width:"100%"},children:[(0,m.jsx)(a.Typography.Title,{level:5,children:"End time"}),(0,m.jsx)(a.DatePicker,{style:{width:"100%"}})]})})]})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Ge,{})})]})})},Oe=()=>(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{xs:24,md:10,children:(0,m.jsx)(qe,{})}),(0,m.jsx)(a.Col,{xs:24,md:14,children:(0,m.jsx)(Me,{})})]}),Ye=e=>{let{distributorAddress:t}=e;const r=(0,s.useSelector)((e=>{let{pools:t}=e;return t})),{mint:i}=N(t),n=(0,A.useMemo)((()=>{const e=Object.keys(r).find((e=>r[e].mintLpt.toBase58()===i.toBase58()));if(!e)return"";return r[e].mint.toBase58()}),[i,r]);return(0,m.jsx)(T,{mintAddress:n})},Ve=e=>{let{distributorAddress:t}=e;const r=W(t),A=(null===r||void 0===r?void 0:r.createAt)||0;return(0,m.jsx)(a.Typography.Text,{children:v()(1e3*A||"").format(k)})};var ze=r(97429).Buffer;const Le=[{title:"WALLET ADDRESS",dataIndex:"walletAddress",render:e=>(0,m.jsx)(a.Typography.Text,{type:"success",underline:!0,onClick:()=>window.open(i.util.explorer(e),"_blank"),style:{cursor:"pointer"},children:i.util.shortenAddress(e)})},{title:"NFT INFO",dataIndex:"mintAddress",render:e=>(0,m.jsx)(T,{mintAddress:e})}],He=e=>{let{distributorAddress:t}=e;const[r,i]=(0,A.useState)(!1),n=W(t),d=(0,s.useSelector)((e=>{let{cheques:t}=e;return t})),l=(0,A.useMemo)((()=>{const e=[];if(!n)return e;const t=le.fromBuffer(ze.from(n.data)).receipients;for(const{chequeAddress:r,authority:A}of t){if(!d[r.toBase58()])continue;const{mint:t}=d[r.toBase58()];e.push({walletAddress:A.toBase58(),mintAddress:t.toBase58(),chequeAddress:r.toBase58()})}return e}),[d,n]);return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(a.Button,{icon:(0,m.jsx)(o.Z,{name:"document-text-outline"}),onClick:()=>i(!0),disabled:!l.length}),(0,m.jsx)(a.Modal,{open:r,footer:null,closeIcon:(0,m.jsx)(o.Z,{name:"close-outline"}),onCancel:()=>i(!1),children:(0,m.jsxs)(a.Row,{gutter:[24,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:5,children:" List Receivers "})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Table,{pagination:!1,columns:Le,dataSource:l,rowKey:e=>e.chequeAddress,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})})]})})]})},Fe=e=>{let{distributorAddress:t}=e;const{endedAt:r}=N(t);return(0,m.jsx)(a.Typography.Text,{children:r.isZero()?"Unlimited":v()(1e3*r.toNumber()).format(k)})},Ue=[{title:"CREATED DATE",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(Ve,{distributorAddress:e})},{title:"EXPIRATION DATE",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(Fe,{distributorAddress:e})},{title:"COLLECTION",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(Ye,{distributorAddress:e})},{title:"UNCLAIMED LIST",dataIndex:"distributorAddress",render:e=>(0,m.jsx)(He,{distributorAddress:e})}],We=()=>{const e=(0,s.useSelector)((e=>{let{distributors:t}=e;return t})),t=(0,i.useWalletAddress)(),r=Object.keys(e).filter((r=>e[r].authority.toBase58()===t)).map((e=>({distributorAddress:e})));return(0,m.jsx)(a.Card,{children:(0,m.jsxs)(a.Row,{gutter:[24,24],align:"middle",children:[(0,m.jsx)(a.Col,{flex:"auto",children:(0,m.jsx)(a.Typography.Title,{level:5,children:"History"})}),(0,m.jsx)(a.Col,{children:"Filter"}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Table,{rowKey:e=>e.distributorAddress,columns:Ue,dataSource:r,pagination:!1,rowClassName:(e,t)=>t%2?"odd-row":"even-row"})}),(0,m.jsx)(a.Col,{span:24,style:{textAlign:"center"},children:(0,m.jsx)(a.Button,{type:"ghost",children:"View more"})})]})})},Xe=()=>(0,m.jsxs)(a.Row,{gutter:[32,32],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(a.Typography.Title,{level:3,children:"Airdrops"})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(Oe,{})}),(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(We,{})}),(0,m.jsx)(a.Col,{span:24})]}),Ze=()=>{const{root:e,extend:t}=(0,i.useAppRoute)();return(0,m.jsxs)(a.Row,{gutter:[0,24],children:[(0,m.jsx)(a.Col,{span:24,children:(0,m.jsx)(y,{})}),(0,m.jsx)(a.Col,{xs:24,xxl:16,className:"container",children:(0,m.jsxs)(n.Switch,{children:[(0,m.jsx)(n.Route,{exact:!0,path:t("/dashboard"),component:xe}),(0,m.jsx)(n.Route,{exact:!0,path:t("/airdrop"),component:Xe}),(0,m.jsx)(n.Redirect,{from:"*",to:`${e}/dashboard`})]})})]})},_e=e=>{let{children:t}=e;const r=(0,i.useWalletAddress)(),[s,n]=(0,A.useState)(!1);return(0,A.useEffect)((()=>{if(s)return;const e=(0,ce.getAnchorProvider)(i.rpc,r,window.sentre.solana),t=new ne(e,u.sol.leFlashId);window.leFlash=t,n(!0)}),[r,s]),s?(0,m.jsx)(A.Fragment,{children:t}):null};var Je=r(44994);const $e={},et=(0,Je.r)({}),tt=e=>{const{program:t,name:r,filter:s,upset:i,init:n}=e,[a,o]=(0,A.useState)(0),[,d]=et(),{accountClient:l,connection:c}=(0,A.useMemo)((()=>{var e;const A=null===t||void 0===t||null===(e=t.account)||void 0===e?void 0:e[r];return{accountClient:A,connection:A.provider.connection}}),[r,null===t||void 0===t?void 0:t.account]),u=(0,A.useCallback)((async()=>{if(void 0===$e[r])try{$e[r]=!0,d({...$e,[r]:!0});const e=await l.all(s),t={};for(const r of e)t[r.publicKey.toBase58()]=r.account;await n(t)}catch(e){(0,O.cB)(e)}finally{$e[r]=!1,d({...$e,[r]:!1})}}),[l,s,n,r,d]),p=(0,A.useCallback)((async()=>{if(a)return;const e=c.onProgramAccountChange(l.programId,(async e=>{const A=e.accountId.toBase58(),s=e.accountInfo.data,n=t.coder.accounts.decode(r,s);i(A,n)}),"confirmed",[{dataSize:l.size},{memcmp:{offset:0,bytes:(0,ce.encodeIxData)((0,ce.accountDiscriminator)(r))}},...s]);o(e)}),[l.programId,l.size,c,s,r,t.coder.accounts,i,a]);return(0,A.useEffect)((()=>{u()}),[u]),(0,A.useEffect)((()=>(p(),()=>{(async()=>{a&&await c.removeProgramAccountChangeListener(a)})()})),[c,p,a]),(0,m.jsx)(A.Fragment,{})},rt="cheque",At=(0,we.createAsyncThunk)("cheque/initCheques",(async e=>e)),st=(0,we.createAsyncThunk)("cheque/upsetCheque",(async e=>{let{address:t,data:r}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!r)throw new Error("Data is empty");return{[t]:r}})),it=(0,we.createSlice)({name:rt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(At.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(st.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)}))}}).reducer,nt=[],at=()=>{const e=(0,s.useDispatch)(),t=ue(),r=(0,A.useCallback)((t=>e(At(t))),[e]),i=(0,A.useCallback)(((t,r)=>e(st({address:t,data:r}))),[e]);return(0,m.jsx)(tt,{program:t.program,name:"cheque",filter:nt,init:r,upset:i})},ot="distributor",dt=(0,we.createAsyncThunk)("distributor/initDistributors",(async e=>e)),lt=(0,we.createAsyncThunk)("distributor/upsetDistributor",(async e=>{let{address:t,data:r}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!r)throw new Error("Data is empty");return{[t]:r}})),ct=(0,we.createSlice)({name:ot,initialState:{},reducers:{},extraReducers:e=>{e.addCase(dt.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(lt.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)}))}}).reducer,ut=[],pt=()=>{const e=(0,s.useDispatch)(),t=ue(),r=(0,A.useCallback)((t=>e(dt(t))),[e]),i=(0,A.useCallback)(((t,r)=>e(lt({address:t,data:r}))),[e]);return(0,m.jsx)(tt,{program:t.program,name:"distributor",filter:ut,init:r,upset:i})},gt="pool",mt=(0,we.createAsyncThunk)("pool/initPools",(async e=>e)),ht=(0,we.createAsyncThunk)("pool/upsetPool",(async e=>{let{address:t,data:r}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!r)throw new Error("Data is empty");return{[t]:r}})),yt=(0,we.createSlice)({name:gt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(mt.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(ht.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)}))}}).reducer,xt=[],ft=()=>{const e=(0,s.useDispatch)(),t=ue(),r=(0,A.useCallback)((t=>e(mt(t))),[e]),i=(0,A.useCallback)(((t,r)=>e(ht({address:t,data:r}))),[e]);return(0,m.jsx)(tt,{program:t.program,name:"pool",filter:xt,init:r,upset:i})},wt="receipt",Ct=(0,we.createAsyncThunk)("receipt/initReceipts",(async e=>e)),It=(0,we.createAsyncThunk)("receipt/upsetReceipt",(async e=>{let{address:t,data:r}=e;if(!i.util.isAddress(t))throw new Error("Invalid farm address");if(!r)throw new Error("Data is empty");return{[t]:r}})),Et=(0,we.createSlice)({name:wt,initialState:{},reducers:{},extraReducers:e=>{e.addCase(Ct.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)})).addCase(It.fulfilled,((e,t)=>{let{payload:r}=t;Object.assign(e,r)}))}}).reducer,Bt=()=>{const e=(0,s.useDispatch)(),t=ue(),r=[{dataSize:184},{memcmp:{offset:8,bytes:(0,i.useWalletAddress)()}}],n=(0,A.useCallback)((t=>e(Ct(t))),[e]),a=(0,A.useCallback)(((t,r)=>e(It({address:t,data:r}))),[e]);return(0,m.jsx)(tt,{program:t.program,name:"receipt",filter:r,init:n,upset:a})},jt=e=>{let{children:t}=e;const[r]=et(),s=(0,A.useMemo)((()=>!Object.values(r).length||Object.values(r).includes(!0)),[r]);return(0,m.jsxs)(A.Fragment,{children:[(0,m.jsx)(pt,{}),(0,m.jsx)(ft,{}),(0,m.jsx)(at,{}),(0,m.jsx)(Bt,{}),s?null:t]})};var bt=r(97429).Buffer;BigInt.prototype.toJSON=function(){return this.toString()};const vt={serializableCheck:{isSerializable:e=>"undefined"===typeof e||null===e||"string"===typeof e||"boolean"===typeof e||"number"===typeof e||Array.isArray(e)||(e=>{if(null===e)return!1;const t=Object.getPrototypeOf(e);return null!==t&&null===Object.getPrototypeOf(t)})(e)||"bigint"===typeof e||e instanceof x.rV.PublicKey||e instanceof x.BN||bt.isBuffer(e)}},Qt=(0,we.configureStore)({middleware:e=>e(vt),devTools:!1,reducer:{main:ke,recipients:je,distributors:ct,pools:yt,cheques:it,receipts:Et}});var St=r(45597);const{manifest:{appId:Mt}}=u,Tt=(0,A.memo)((()=>(0,m.jsx)(s.Provider,{store:Qt,children:(0,m.jsx)(jt,{children:(0,m.jsx)(_e,{children:(0,m.jsx)(Ze,{})})})}))),Pt=()=>{const e=(0,i.useSetBackground)();return(0,A.useEffect)((()=>{e({light:"#1D2127",dark:"#1D2127"})}),[e]),(0,m.jsx)(Tt,{})},kt=()=>(0,m.jsx)(i.AntdProvider,{appId:Mt,prefixCls:Mt,children:(0,m.jsx)(Pt,{})})},83272:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/README.ff93448fef94ea73029b.md"},69363:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/logo.6ee3cf6a07d3e8cc5248.png"},70854:(e,t,r)=>{"use strict";e.exports=r.p+"static/media/panel.6ce7bc345912340df001.png"},7420:()=>{},95856:()=>{},46601:()=>{}}]);
//# sourceMappingURL=src_bootstrap_app_tsx.b8564717.chunk.js.map